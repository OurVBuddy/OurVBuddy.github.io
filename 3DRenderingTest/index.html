<!DOCTYPE html>
<!-- Created with https://packager.turbowarp.org/ -->
<html>
<head>
  <style>
    .text {
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
    }
    .button {
        background-color: rgb(145, 185, 215); 
        border: black;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
    }
  </style>
  <center><h1 class="3D Rendering Test" style="color: white;">Bem Vindo!</h2></center>
  <center><a href="https://OurVBuddy.github.io"><button class="button">Back</button></a></center> 
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>3D Rendering</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #000000;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #000000;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #ff4c4c26;
    }
    .control-button.active {
      background: #ff4c4c59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#000000">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#4cbf56;stroke:#45993d;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    <h1 class="loading-text">starting up the engine</h1>
    
    
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 640;
      scaffolding.height = 360;
      scaffolding.resizeMode = "preserve-ratio";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("client".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#ff4c4c");

      scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@3D Rendering.sb3"));

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(true);
      if (vm.setFramerate) vm.setFramerate(60);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(true);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: false,
        miscLimits: true,
        maxClones: 9999999999,
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: true
      });
      if (vm.renderer.setMaxTextureDimension) vm.renderer.setMaxTextureDimension(2048);

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: () => 'unsandboxed',
        canLoadExtensionFromProject: () => true
      });
      for (const extension of ["data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Camera%20Controls%20(Very%20Buggy)%0A%2F%2F%20ID%3A%20DTcameracontrols%0A%2F%2F%20Description%3A%20Move%20the%20visible%20part%20of%20the%20stage.%0A%2F%2F%20By%3A%20DT%0A%0A((Scratch)%20%3D%3E%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Camera%20extension%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMjUuMzU0OCIgaGVpZ2h0PSIyMjUuMzU0OCIgdmlld0JveD0iMCwwLDIyNS4zNTQ4LDIyNS4zNTQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTg3LjMyMjkzLC0zNy4zMjI1OSkiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMTg3LjMyMjk0LDE1MGMwLC02Mi4yMzAwMSA1MC40NDczOSwtMTEyLjY3NzQgMTEyLjY3NzQsLTExMi42Nzc0YzYyLjIzMDAxLDAgMTEyLjY3NzQsNTAuNDQ3MzkgMTEyLjY3NzQsMTEyLjY3NzRjMCw2Mi4yMzAwMSAtNTAuNDQ3MzksMTEyLjY3NzQgLTExMi42Nzc0LDExMi42Nzc0Yy02Mi4yMzAwMSwwIC0xMTIuNjc3NCwtNTAuNDQ3MzkgLTExMi42Nzc0LC0xMTIuNjc3NHoiIGZpbGw9IiNmZjRkYTciIHN0cm9rZS13aWR0aD0iMCIvPjxnPjxwYXRoIGQ9Ik0zMTcuMTAyOSw4MC44MTA4N2MyMS44OTI0LDAgMzkuNjYyMDcsMTcuNzM3MjMgMzkuNjYyMDcsMzkuNjM0NGMwLDEyLjMwNTE3IC01LjYxMTQ4LDIzLjI5NjIyIC0xNC40MDA4OCwzMC41NjgyNGg4Ljc3MDMydjY4LjE3NTYzaC0xMTQuMTMzMjV2LTU1Ljc5ODg5Yy0xNC4zMzQwOCwtMy41MjgxNyAtMjQuOTYxNTMsLTE2LjQ1NzQ3IC0yNC45NjE1MywtMzEuODgwNDRjMCwtMTguMTM5IDE0LjY5NjczLC0zMi44MzQ3OCAzMi44MzQ3OCwtMzIuODM0NzhjMTIuMDM3OTUsMCAyMi41NTY2MSw2LjQ3ODAxIDI4LjI3MjExLDE2LjEzMzk1bDQuODYxMzcsLTAuOTI0NzVjMy4xMjkyNiwtMTguNzY2OTYgMTkuNDM5NzYsLTMzLjA3MzM2IDM5LjA5OTAyLC0zMy4wNzMzNnpNMjc2LjIxODUxLDE0MS4yOTE3MWMtMS4xMDAzNSwzLjUzMzg5IC0yLjc2OTQ3LDYuODEyMDMgLTQuOTIwNTQsOS43MjE3OWgyMC41NDc3NGMtMy42ODc1NCwtMy4wNDgxNCAtNi44MDI0OCwtNi43NjUyNyAtOS4xODU0NSwtMTAuOTQ0Mjl6IiBmaWxsPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNMzM2LjU3NTI5LDExOS41MjgxNWMwLDExLjA2ODM1IC04Ljk3MjY0LDIwLjA0MDk5IC0yMC4wNDA5OSwyMC4wNDA5OWMtMTEuMDY4MzUsMCAtMjAuMDQwOTksLTguOTcyNjQgLTIwLjA0MDk5LC0yMC4wNDA5OWMwLC0xMS4wNjgzNSA4Ljk3MjY0LC0yMC4wNDA5OSAyMC4wNDA5OSwtMjAuMDQwOTljMTEuMDY4MzUsMCAyMC4wNDA5OSw4Ljk3MjY0IDIwLjA0MDk5LDIwLjA0MDk5eiIgZmlsbD0iI2ZmNGRhNyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMjYxLjE4MywxMzAuMDI1ODFjMCw4Ljk2MDA0IC03LjI2MzYyLDE2LjIyMzY2IC0xNi4yMjM2NiwxNi4yMjM2NmMtOC45NjAwNCwwIC0xNi4yMjM2NiwtNy4yNjM2MiAtMTYuMjIzNjYsLTE2LjIyMzY2YzAsLTguOTYwMDQgNy4yNjM2MiwtMTYuMjIzNjYgMTYuMjIzNjYsLTE2LjIyMzY2YzguOTYwMDQsMCAxNi4yMjM2Niw3LjI2MzYyIDE2LjIyMzY2LDE2LjIyMzY2eiIgZmlsbD0iI2ZmNGRhNyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMzg3Ljk2MDM5LDE0NS44NTcyNHY2MC41MTA0M2wtMjEuNjAzMjYsLTEzLjQ3MjE3aC0xNi44OTgzNHYtMzMuNTY2MDdoMTYuODk4MzRsMjEuNTk5MTcsLTEzLjQ3MTEyeiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPC9nPjwvZz48L2c%2BPC9zdmc%2BPCEtLXJvdGF0aW9uQ2VudGVyOjExMi42NzcwNjU6MTEyLjY3NzQwNS0tPg%3D%3D%22%3B%0A%20%20const%20CW%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAIUAAAB%2BCAYAAAAKj9LmAAAAAXNSR0IArs4c6QAABqdJREFUeF7tneuV1DAMhZdSoBWoB2qBeqAVKAWOOQRCNvHV27Kt%2Fbsex7r6ciV7MjNvXupvWgW%2Bv%2F%2F8sy3%2B3bdPbyyDMJ3McmHauQ7BqPNYC0u9LnccissijumhQCJxRb8bbyG0dh3cODVrng4KrjjaZGSARBqzFIz0UEgF8YDhaU6p%2BJQ1auOXrC0tFFoxKIJ7jJEk4WkdVhpw15QKCisRPJLNnZObiOv8llpw15ICCksBKMl7%2B%2FXj72E%2FPnyhDFeN4SbkuBjS5IjhGN%2BLhbuGoVCgwKnZuApEfR0aZwkNJzFIl6d4rcAYAgUKGiXLCwJ0XQt3QXAgbXqxTwkFCriXlJEgPK1L4yR3cCB9KBo8rQnBeI4xzClQwHfCU0Sg3N0RY6SAHMlC%2BlC1sHCLEChQwNekUQWISDb3GhI4GhhII6om6aFAga4Ewx08EkC0jpkaCg4Q1LuAe9dmGa%2BBQ6KNtq9wKR9UICQBZ0k0dx0SMKT6pIKCCkMTVBowNxnZxlPh0OijLSFmTkEFQhNstgRr1oPg0OiUAooCQobHU%2FI0QKBjb8p5hdopKEBYBCmTPf%2BrrmBYaaXpK1RQFBB20LUkWgGBjuORW4ihKCDsgPCYSdNXuEFhSb2HaDvMKS0hIiiQSxQQOZALg6KAyJFwyiqkJYTlFAUEJRV5xgyHokpGHhjQWUX7f28HQnaKcol8SaesSNJXkKAoICjy5xwzBIoqGzlh0JQQ6BQ9lyggcgMhPdnsQjFL2UDvOFJStzLg3BIihmK0iBYg9GAZHR8FZOoYMyiylg1vGK5CrwAH97zi0SmyQRENw0pwmECRCYjRMKwCB6eE3DpFFiiyAXEGZLayooJiBSDQQyTn5KId1irNKKeEvHKKDFBwHYIDQS%2FJEkBmcQwXKCKCHwXDHShcQCL0oW5Bn8ZRS8h%2FTjHSJThAWDkDRWQOHNnBMIUiIlgKFJEwXIFBcERoRIG4N2YqKLID0YReGYrr8xV%2Fy8eo0lFAaO9%2F3uspbgGh8LTFAoKXUIvR00MxsodYpWRcQSJDMaJ0IJcYDQSCwtNBLRyBuy099xW%2Fy0c0FLMD0TTbFgqvwDmna553zdPcK%2Bw0NFvTrlPsCMXqQDRYUF8RDkVml9gBiB4UR1%2FR%2Fao%2BD6eYFQoPLUaURhUUHiLMCsTMjSV3F9J2fY9OUVD8k9NDi1EucVy311ekgCLzmcSKQKBms6AYcE4z2iVQXxEGxYz9xKouUVAQbsunrejKUPTAGO4UmfuJFXcdqNFs%2Fy8o%2FqgU%2Ff4PwcDchqBSXlAQoDiyM3s5QW9EwhNNawHQebvbbUGcGB1xE6eZfljo4VV2KFo2dwfj6O%2BqfFzu7V3BODf8BcWN4e8GxnUHWFA8dAG7gHF3JFBQEFrD1QBBZ0MFBQGK3YYUFLtlnBBvQUEQabchw6E4TtF2Ez5zvKHPaM5wgJU5WVFrC32au6CISqvuOgWFTr8lX50CiuorcrEV%2FlnSKiG5ALhbTfj3UxQUBcUrBdBTP%2FklW3%2BF4U7RJC23yA0WhKItP%2BoprGo4c8BC%2Bh5Nayh6blFgjAejoBifg3QrIEHhUULKLdKx8HdB5C9sjy4hVUbGQUOGotxiXJKirzwciioj0SnH10vxy0Dok0vomUIcZo3gKJACCuQW1V9wUqofm%2BrXBssx9Am1mCEVFOUYFinVz5HyF4yRY1Q50Se%2BN0NKKCiOUWD4gdGFol125Jd5lGP4JV7sFAgKrwOt84IpYJRr2MIDnQKB4XH8fQ2RCsbxujrX0EFCgmJGMMo95GCYQBFRRo4Qua5R7sGHgwwFcosZwLiTp0rNa1VYUCAwIvoLSRPKuVcKkpcXUygi3aLg4KDOG8uGArnFKDDadaX9Rk%2ByHZ1DBEVmMLQNafUdgvJxFg19F1R0j9G747UuspNjiJ3iSMBMYNxBw4FlFzDcoRjZY%2FDaK1pPsgMYaigo%2FcVMYKCGtaBg3GqojBQYDDEHDzVxCmp%2FcYzL1IA%2B6b%2Fzp%2BNNoaCWkllcY9dPx5tDsRIYBYVDHaP0Gdld4w6M1ZtNF6fgHHBl7zMKCge34JSTjK5RUDhBwQUjCxzVUzgCISknGcpKQREEhcQ1RjlHQREIBfew67q0iMOvOrwaAISmpJxf6wHIzkA0bd23pFTeqGcaaD4tJOit9NXPKFJBYeUcT9AgWBAMbd4dgEgLhbbnQG4i%2Bf8uQKSHIgscOwExDRTepaXnHLsBMSUUkYDsCMT0UNzd4Ra7mF1hOPRMsyWVNH%2Fc1%2FSA2R2Es5a%2FACFtcn%2FxxMQMAAAAAElFTkSuQmCC%22%3B%0A%20%20const%20CCW%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAIYAAAB9CAYAAABnLBtLAAAAAXNSR0IArs4c6QAABotJREFUeF7tnWuW5TQMhJmlwFZgPcNaYD3DVmApzAmHzEmnY%2BthvRxV%2F01iy6XPJSU3fe%2BXnwz%2B%2Fv71j3%2BpYX756%2Fcv1DkVjnPWcsS5y3q0mi4liyviGVwVMaVxS8Wtsk5p3Nfz1WBoxY0WTRvniqj3a6PXbBG7CoxVsT2FWo3NQlRqDM%2F1U3Nzj6eA4VGjdwBiJycRg2GZgNWdYxkLdyd5nbeqhXVcpmD8%2FO3rh%2Fj%2B%2Be3PabxaMd4ERFUXEYExS8gdinPBlnBYAjGKd3XnUevljq%2FdNNzxqfPcwTgCoMSiRFgFwgsCSlzO2qkxKG2o67XHTcDgCK%2BBYwUITkxa0bTXURrMxo0GJAwMzu65Ll4DRUUYRsnWQBIJBxsMTX9xF4US41j424GQapLVnIaCwXENiU3v5BDUuqhNEw3IMhia5EhFuIuimZNKTJXjEm08S0sKGFrneDMQKyXGA5AtwOgExBWQTPdggWHReD5ZNbXwrkBo3cPSOZbAsEjcCA6Lsav0DRZxUJvonMMKjnQwnvoNQPGMUiQcJcA44QAQPG%2FhALLqHCQYXv0FTwKctfLkdAUOgLExe5RzpIAB269BlBccascAGDXA4Dws1DjHFAz0F3WST0Vi7RwAg1J8o%2BOWcKjAQBmpSQvAqJmXElFZwQHHKJFO2yBmcHAb0SEYaDxtkxU92iocYjA69BeUHT8luZou1Boo52gPBiWgdqdXAGXFNdqC4QXEHaRsQLRwPILx5v4iCogqgACMiednwVClF9HAIXKMbFvU1PtKUFzjj9QSYFyUXwGC6tjvgGr%2BSeoYozIcnxzjDf2FBgopDDP3koASBYfUNV4HhgQKSxieQOECkg3Hkw5sMKKC1%2FQRnHcSruN6A6EpNRH6SlzjNWBw4IgGQgpIJhx3bQCG1qKU11HlxRsOrmt8AKND45ntGgdPmXCYguFNsXLzDS%2BjGlDA8fyleVddWI6xGxg79BuUc3hqPto4LcAAHGMf5pSTH47xhv7iLgVKihyO0zVeDQZcwxEMz1pn3XSOxqvuHBl3KVSfQTrGG8DYwTmiSznVZ%2FwHRnRQUU4h6Tkq38J6bE6AIfgoPhuO6A06KydTx%2FAgNcstznmpnZIZH8DIVJ%2F40vuqruGxSeEYDyBSXXkWu5GuMQUjMpAssZ%2FmBRjjnws5XLNdj0H1GlVLyRG3dTlBKdmolMweH5QBw4PSCuWk8p3JNmCcibSmNQOQ6o%2FGT01GfZ91DshSQj39zEhixpzZ%2FUUVMI44yM9KMhKUMWcVKCqUkg9gdHcNgPFxO7LfEs%2FYxRFzVgKiZCm5J4F6RyAiad5zVISiQin58YBrloC3AVIVhmsOSt2VeO9OjM9XAGDwtWp1JsBolW7%2BYgEGX6s2Z0Z%2B2s168tlG%2BeILBRjFE5QVXhQY1AeJ5A%2FZZAnUdd4K%2FcWnR%2BJdk1Fp3QCjUjaKxBJVRo7lUq82opQUgSLyUTjAKJR0KpQKbnHE%2BOm%2F3anAcdxXgQpgDL84xXfpGH2kQCQUnDKCu5IirEaCQT2%2FOCVB85kMRyQUXLeAYxSG4gjN%2Bq1wgJGccO70VdziejeCUsLNntN50VBI3AKlxCnp1LDU65KRJeTJLQAGlUGH4xlQzNwCYDgkWTrkLlDAMaSZXTifgsLrLkTjFgBjIdGSS3eDAmBIsqs4lwOEp1No3QJgKJLNvWRnKAAGN8vC86pDMboTuS4Tn5UIkz47nQuEd%2FlYKSHn%2BgCGARgSIHaAAqVkAQopDBFAUE7BKSFwDAUUGhjOaTwecz8tgfu%2BBbV8lJKBQisQXIeMAoJyC%2BnXPwAMxs9dUrtrdLwKFJISglLyEiAop9BA0bb5tCoTWSXjOq%2FXd5e2KyXWUESWC89m8z52KzAsoMgGIcItWpUSKRSVAJA6hbavuM7TxjEoMKqDcCaN6iksoGjjGIBCfsPdwjEy3siWp2J%2BRZRTtHmOASh0iL7eMaK%2BoUYnP31VtFO0d4zqzSYHCKtG8wlPOAa9acPPyIaixV3JTqWEC4SnU6CUfPsa7gSjCSsBATCKgFERCpSSJM%2BQwHCGKH3RZnVpbZvPQ7joO5MdgGhTSo6FZjegOwEBMP5XwMs1NDBklY2WzzFmjnEVZBWQFRAqAdHKMbhwcPoOCwDuOzS6seQ0pq9vPq8iUB%2B%2FcwSzPKciEO0c41xwNhyVYbhC38oxMuHYBYi2jhEFx24g3EtkS8fw6Dt2BwFgTLpHTv%2FxNgBGcnwHa6xrfvicCcEAAAAASUVORK5CYII%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20let%20cameraX%20%3D%200%3B%0A%20%20let%20cameraY%20%3D%200%3B%0A%20%20let%20cameraZoom%20%3D%20100%3B%0A%20%20let%20cameraDirection%20%3D%2090%3B%0A%20%20let%20cameraBG%20%3D%20%22%23ffffff%22%3B%0A%0A%20%20vm.runtime.runtimeOptions.fencing%20%3D%20false%3B%0A%20%20vm.renderer.offscreenTouching%20%3D%20true%3B%0A%20%20vm.setInterpolation(false)%3B%0A%0A%20%20function%20updateCamera(%0A%20%20%20%20x%20%3D%20cameraX%2C%0A%20%20%20%20y%20%3D%20cameraY%2C%0A%20%20%20%20scale%20%3D%20cameraZoom%20%2F%20100%2C%0A%20%20%20%20rot%20%3D%20-cameraDirection%20%2B%2090%0A%20%20)%20%7B%0A%20%20%20%20rot%20%3D%20(rot%20%2F%20180)%20*%20Math.PI%3B%0A%20%20%20%20const%20s%20%3D%20Math.sin(rot)%20*%20scale%3B%0A%20%20%20%20const%20c%20%3D%20Math.cos(rot)%20*%20scale%3B%0A%20%20%20%20const%20w%20%3D%20vm.runtime.stageWidth%20%2F%202%3B%0A%20%20%20%20const%20h%20%3D%20vm.runtime.stageHeight%20%2F%202%3B%0A%20%20%20%20vm.renderer._projection%20%3D%20%5B%0A%20%20%20%20%20%20c%20%2F%20w%2C%0A%20%20%20%20%20%20-s%20%2F%20h%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20s%20%2F%20w%2C%0A%20%20%20%20%20%20c%20%2F%20h%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20-1%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20(c%20*%20-x%20%2B%20s%20*%20-y)%20%2F%20w%2C%0A%20%20%20%20%20%20(c%20*%20-y%20-%20s%20*%20-x)%20%2F%20h%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%5D%3B%0A%20%20%20%20vm.renderer.dirty%20%3D%20true%3B%0A%20%20%7D%0A%0A%20%20function%20updateCameraBG(color%20%3D%20cameraBG)%20%7B%0A%20%20%20%20const%20rgb%20%3D%20Scratch.Cast.toRgbColorList(color)%3B%0A%20%20%20%20Scratch.vm.renderer.setBackgroundColor(%0A%20%20%20%20%20%20rgb%5B0%5D%20%2F%20255%2C%0A%20%20%20%20%20%20rgb%5B1%5D%20%2F%20255%2C%0A%20%20%20%20%20%20rgb%5B2%5D%20%2F%20255%0A%20%20%20%20)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20tell%20resize%20to%20update%20camera%20as%20well%0A%20%20vm.runtime.on(%22STAGE_SIZE_CHANGED%22%2C%20(_)%20%3D%3E%20updateCamera())%3B%0A%0A%20%20vm.runtime.on(%22RUNTIME_DISPOSED%22%2C%20(_)%20%3D%3E%20%7B%0A%20%20%20%20cameraX%20%3D%200%3B%0A%20%20%20%20cameraY%20%3D%200%3B%0A%20%20%20%20cameraZoom%20%3D%20100%3B%0A%20%20%20%20cameraDirection%20%3D%2090%3B%0A%20%20%20%20cameraBG%20%3D%20%22%23ffffff%22%3B%0A%20%20%20%20updateCamera()%3B%0A%20%20%20%20updateCameraBG()%3B%0A%20%20%7D)%3B%0A%0A%20%20function%20_translateX(x%2C%20fromTopLeft%20%3D%20false%2C%20multiplier%20%3D%201%2C%20doZoom%20%3D%20true)%20%7B%0A%20%20%20%20const%20w%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageWidth%20%2F%202%20%3A%200%3B%0A%20%20%20%20return%20(x%20-%20w)%20%2F%20(doZoom%20%3F%20cameraZoom%20%2F%20100%20%3A%201)%20%2B%20w%20%2B%20cameraX%20*%20multiplier%3B%0A%20%20%7D%0A%0A%20%20function%20_translateY(y%2C%20fromTopLeft%20%3D%20false%2C%20multiplier%20%3D%201%2C%20doZoom%20%3D%20true)%20%7B%0A%20%20%20%20const%20h%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageHeight%20%2F%202%20%3A%200%3B%0A%20%20%20%20return%20(y%20-%20h)%20%2F%20(doZoom%20%3F%20cameraZoom%20%2F%20100%20%3A%201)%20%2B%20h%20%2B%20cameraY%20*%20multiplier%3B%0A%20%20%7D%0A%0A%20%20function%20rotate(cx%2C%20cy%2C%20x%2C%20y%2C%20radians)%20%7B%0A%20%20%20%20const%20cos%20%3D%20Math.cos(radians)%2C%0A%20%20%20%20%20%20sin%20%3D%20Math.sin(radians)%2C%0A%20%20%20%20%20%20nx%20%3D%20cos%20*%20(x%20-%20cx)%20%2B%20sin%20*%20(y%20-%20cy)%20%2B%20cx%2C%0A%20%20%20%20%20%20ny%20%3D%20cos%20*%20(y%20-%20cy)%20-%20sin%20*%20(x%20-%20cx)%20%2B%20cy%3B%0A%20%20%20%20return%20%5Bnx%2C%20ny%5D%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20rotation%20hell%0A%20%20function%20translateX(%0A%20%20%20%20x%2C%0A%20%20%20%20fromTopLeft%20%3D%20false%2C%0A%20%20%20%20xMult%20%3D%201%2C%0A%20%20%20%20doZoom%20%3D%20true%2C%0A%20%20%20%20y%20%3D%200%2C%0A%20%20%20%20yMult%20%3D%20xMult%0A%20%20)%20%7B%0A%20%20%20%20if%20((cameraDirection%20-%2090)%20%25%20360%20%3D%3D%3D%200%20%7C%7C%20!doZoom)%20%7B%0A%20%20%20%20%20%20return%20_translateX(x%2C%20fromTopLeft%2C%20xMult%2C%20doZoom)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20const%20w%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageWidth%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20h%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageHeight%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20rotated%20%3D%20rotate(%0A%20%20%20%20%20%20%20%20cameraX%20%2B%20w%2C%0A%20%20%20%20%20%20%20%20cameraY%20%2B%20h%2C%0A%20%20%20%20%20%20%20%20_translateX(x%2C%20fromTopLeft%2C%20xMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20_translateY(y%2C%20fromTopLeft%2C%20yMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20((-cameraDirection%20%2B%2090)%20%2F%20180)%20*%20Math.PI%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20rotated%5B0%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20translateY(%0A%20%20%20%20y%2C%0A%20%20%20%20fromTopLeft%20%3D%20false%2C%0A%20%20%20%20yMult%20%3D%201%2C%0A%20%20%20%20doZoom%20%3D%20true%2C%0A%20%20%20%20x%20%3D%200%2C%0A%20%20%20%20xMult%20%3D%20yMult%0A%20%20)%20%7B%0A%20%20%20%20if%20((cameraDirection%20-%2090)%20%25%20360%20%3D%3D%3D%200%20%7C%7C%20!doZoom)%20%7B%0A%20%20%20%20%20%20return%20_translateY(y%2C%20fromTopLeft%2C%20yMult%2C%20doZoom)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20const%20w%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageWidth%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20h%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageHeight%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20rotated%20%3D%20rotate(%0A%20%20%20%20%20%20%20%20cameraX%20%2B%20w%2C%0A%20%20%20%20%20%20%20%20cameraY%20%2B%20h%2C%0A%20%20%20%20%20%20%20%20_translateX(x%2C%20fromTopLeft%2C%20xMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20_translateY(y%2C%20fromTopLeft%2C%20yMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20((-cameraDirection%20%2B%2090)%20%2F%20180)%20*%20Math.PI%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20rotated%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20fix%20mouse%20positions%0A%20%20const%20oldSX%20%3D%20vm.runtime.ioDevices.mouse.getScratchX%3B%0A%20%20const%20oldSY%20%3D%20vm.runtime.ioDevices.mouse.getScratchY%3B%0A%20%20vm.runtime.ioDevices.mouse.getScratchX%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateX(%0A%20%20%20%20%20%20oldSX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldSY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20vm.runtime.ioDevices.mouse.getScratchY%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateY(%0A%20%20%20%20%20%20oldSY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldSX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20const%20oldCX%20%3D%20vm.runtime.ioDevices.mouse.getClientX%3B%0A%20%20const%20oldCY%20%3D%20vm.runtime.ioDevices.mouse.getClientY%3B%0A%20%20vm.runtime.ioDevices.mouse.getClientX%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateX(%0A%20%20%20%20%20%20oldCX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldCY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20-1%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20vm.runtime.ioDevices.mouse.getClientY%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateY(%0A%20%20%20%20%20%20oldCY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20-1%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldCX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20oldPick%20%3D%20vm.renderer.pick%3B%0A%20%20vm.renderer.pick%20%3D%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20return%20oldPick.call(%0A%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20translateX(x%2C%20true%2C%201%2C%20true%2C%20y%2C%20-1)%2C%0A%20%20%20%20%20%20translateY(y%2C%20true%2C%20-1%2C%20true%2C%20x%2C%201)%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20oldExtract%20%3D%20vm.renderer.extractDrawableScreenSpace%3B%0A%20%20vm.renderer.extractDrawableScreenSpace%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20const%20extracted%20%3D%20oldExtract.apply(this%2C%20args)%3B%0A%20%20%20%20extracted.x%20%3D%20translateX(extracted.x%2C%20false%2C%20-1%2C%20false%2C%20extracted.y%2C%201)%3B%0A%20%20%20%20extracted.y%20%3D%20translateY(extracted.y%2C%20false%2C%201%2C%20false%2C%20extracted.x%2C%20-1)%3B%0A%20%20%20%20return%20extracted%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20%40ts-expect-error%0A%20%20if%20(vm.runtime.ext_scratch3_looks)%20%7B%0A%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20const%20oldPosBubble%20%3D%20vm.runtime.ext_scratch3_looks._positionBubble%3B%0A%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20vm.runtime.ext_scratch3_looks._positionBubble%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20%2F%2F%20it's%20harder%20to%20limit%20speech%20bubbles%20to%20the%20camera%20region...%0A%20%20%20%20%20%20%2F%2F%20it's%20easier%20to%20just%20remove%20speech%20bubble%20bounds%20entirely%0A%20%20%20%20%20%20const%20oldGetNativeSize%20%3D%20this.runtime.renderer.getNativeSize%3B%0A%20%20%20%20%20%20this.runtime.renderer.getNativeSize%20%3D%20()%20%3D%3E%20%5BInfinity%2C%20Infinity%5D%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20return%20oldPosBubble.call(this%2C%20target)%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20this.runtime.renderer.getNativeSize%20%3D%20oldGetNativeSize%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20class%20Camera%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22DTcameracontrols%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Camera%20(Very%20Buggy)%22%2C%0A%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23ff4da7%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23de4391%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23c83c82%22%2C%0A%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveSteps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22move%20camera%20%5Bval%5D%20steps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateCW%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20image%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20CW%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateCCW%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20image%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20CCW%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22goTo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22move%20camera%20to%20%5Bsprite%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22sprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBoth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20direction%20to%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pointTowards%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22point%20camera%20towards%20%5Bsprite%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22sprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20x%20by%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20x%20to%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20y%20by%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20y%20to%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22camera%20x%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22camera%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22camera%20direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20debugging%20blocks%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22client%20x%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22client%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20camera%20zoom%20by%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20camera%20zoom%20to%20%5Bval%5D%20%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22camera%20zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCol%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20background%20color%20to%20%5Bval%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCol%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22background%20color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getSprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCX()%20%7B%0A%20%20%20%20%20%20return%20vm.runtime.ioDevices.mouse.getClientX()%3B%0A%20%20%20%20%7D%0A%20%20%20%20getCY()%20%7B%0A%20%20%20%20%20%20return%20vm.runtime.ioDevices.mouse.getClientY()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSprites()%20%7B%0A%20%20%20%20%20%20const%20sprites%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20Scratch.vm.runtime.targets.forEach((e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(e.isOriginal%20%26%26%20!e.isStage)%20sprites.push(e.sprite.name)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(sprites.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20sprites.push(%22no%20sprites%20exist%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20sprites%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBoth(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraX%20%3D%20%2Bargs.x%3B%0A%20%20%20%20%20%20cameraY%20%3D%20%2Bargs.y%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeZoom(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraZoom%20%2B%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setZoom(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraZoom%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraX%20%2B%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraX%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraY%20%2B%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraY%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setDirection(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraDirection%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateCW(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraDirection%20%3D%20cameraDirection%20%2B%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateCCW(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraDirection%20%3D%20cameraDirection%20-%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20getX()%20%7B%0A%20%20%20%20%20%20return%20cameraX%3B%0A%20%20%20%20%7D%0A%20%20%20%20getY()%20%7B%0A%20%20%20%20%20%20return%20cameraY%3B%0A%20%20%20%20%7D%0A%20%20%20%20getZoom()%20%7B%0A%20%20%20%20%20%20return%20cameraZoom%3B%0A%20%20%20%20%7D%0A%20%20%20%20getDirection()%20%7B%0A%20%20%20%20%20%20return%20cameraDirection%3B%0A%20%20%20%20%7D%0A%20%20%20%20setCol(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraBG%20%3D%20args.val%3B%0A%20%20%20%20%20%20updateCameraBG()%3B%0A%20%20%20%20%7D%0A%20%20%20%20getCol()%20%7B%0A%20%20%20%20%20%20return%20cameraBG%3B%0A%20%20%20%20%7D%0A%20%20%20%20moveSteps(args)%20%7B%0A%20%20%20%20%20%20const%20dir%20%3D%20((-cameraDirection%20%2B%2090)%20*%20Math.PI)%20%2F%20180%3B%0A%20%20%20%20%20%20cameraX%20%2B%3D%20args.val%20*%20Math.cos(dir)%3B%0A%20%20%20%20%20%20cameraY%20%2B%3D%20args.val%20*%20Math.sin(dir)%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20goTo(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.Cast.toString(args.sprite)%3B%0A%20%20%20%20%20%20const%20sprite%20%3D%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!sprite)%20return%3B%0A%20%20%20%20%20%20cameraX%20%3D%20Math.round(sprite.x)%3B%0A%20%20%20%20%20%20cameraY%20%3D%20Math.round(sprite.y)%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20pointTowards(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.Cast.toString(args.sprite)%3B%0A%20%20%20%20%20%20const%20sprite%20%3D%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!sprite)%20return%3B%0A%20%20%20%20%20%20const%20targetX%20%3D%20sprite.x%3B%0A%20%20%20%20%20%20const%20targetY%20%3D%20sprite.y%3B%0A%20%20%20%20%20%20const%20dx%20%3D%20targetX%20-%20cameraX%3B%0A%20%20%20%20%20%20const%20dy%20%3D%20targetY%20-%20cameraY%3B%0A%20%20%20%20%20%20cameraDirection%20%3D%2090%20-%20this.radToDeg(Math.atan2(dy%2C%20dx))%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20radToDeg(rad)%20%7B%0A%20%20%20%20%20%20return%20(rad%20*%20180)%20%2F%20Math.PI%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Camera())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Pen%20Plus%0A%2F%2F%20ID%3A%20betterpen%0A%2F%2F%20Description%3A%20Advanced%20rendering%20capabilities.%0A%2F%2F%20By%3A%20ObviousAlexC%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fpinksheep2917%2F%3E%0A%0A%2F*%20eslint-disable%20no-empty-pattern%20*%2F%0A%2F*%20eslint-disable%20no-prototype-builtins%20*%2F%0A%2F*%0APen%2B%20Version%205%0AAuthor%20ObviousAlexC%0A%0ASpecial%20Thanks%20to%20Garbo%20for%20helping%20me%20with%20this%20new%20version.%0A%0AChangelog%3A%0AAdded%20Line%20blocks%0AFixed%20Color%20Blocks%0ASeperated%20Blocks%20into%20catagories%20just%20so%20I%20could%20edit%20them%20in%20the%20future%20without%20having%20to%20dig%20through%20a%20large%20blocks%20array!%0AFixed%20support%20for%20the%20Plugin%20Loader%0AMade%20cross%20platform%20with%20the%20same%20file%20by%20using%20conditional%20assignments!%0AConfirmed%20some%20doubts%20(see%20line%2052)%20%0ALearned%20that%20javascript%20had%20C%2B%2B%20like%20conditional%20assignments%0ADepracated%20spacial%20transformation%20block%0AAdded%20spacial%20changing%20block%0AOther%20various%20small%20fixes%0A*%2F%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Pen%2B%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20canvas%20%3D%20runtime.renderer.canvas%3B%0A%20%20const%20gl%20%3D%20runtime.renderer._gl%3B%0A%0A%20%20const%20EXAMPLE_IMAGE%20%3D%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fdango.png%22%3B%0A%0A%20%20const%20blankImage%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAAXNSR0IArs4c6QAAABRJREFUGFdj%2FP%2F%2F%2F38GBgYGRhgDAFfVB%2FvDfnUlAAAAAElFTkSuQmCC%22%3B%0A%0A%20%20%2F%2F%20TODO%3A%20see%20how%20these%20differ%20from%20Scratch%2C%20if%20at%20all%0A%20%20%2F%2F%20Note%20to%20Garbo%20or%20any%20code%20checker%20it%20does%20it%20uses%20bilinear%20filtering!%0A%20%20gl.enable(gl.BLEND)%3B%0A%20%20gl.blendEquation(gl.FUNC_ADD)%3B%0A%20%20gl.blendFunc(gl.ONE_MINUS_CONSTANT_ALPHA%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%0A%20%20var%20stampWidth%20%3D%2064%3B%0A%20%20var%20stampHeight%20%3D%2064%3B%0A%0A%20%20var%20lineWidth%20%3D%20%5B1%2C%201%5D%3B%0A%20%20var%20lineColor%20%3D%20%7B%0A%20%20%20%20r%3A%201%2C%0A%20%20%20%20g%3A%201%2C%0A%20%20%20%20b%3A%201%2C%0A%20%20%20%20a%3A%201%2C%0A%20%20%7D%3B%0A%0A%20%20var%20screenWidth%20%3D%20480%3B%0A%20%20var%20screenHeight%20%3D%20360%3B%0A%20%20var%20coordinateSpace%20%3D%20%22Canvas%22%3B%0A%0A%20%20var%20stampRotation%20%3D%2090%3B%0A%20%20var%20stampOffset%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20const%20m4%20%3D%20(function%20()%20%7B%0A%20%20%20%20%2F*!%0A%20%20%20%20%20*%204x4%20matrix%20operation%20code%20is%20from%20https%3A%2F%2Fwebglfundamentals.org%2Fwebgl%2Fresources%2Fm4.js%0A%20%20%20%20%20*%20We%20have%20made%20some%20changes%3A%0A%20%20%20%20%20*%20%20-%20Fixed%20type%20errors%0A%20%20%20%20%20*%20%20-%20Changed%20code%20formatting%0A%20%20%20%20%20*%20%20-%20Removed%20unused%20functions%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Copyright%202021%20GFXFundamentals.%0A%20%20%20%20%20*%20All%20rights%20reserved.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Redistribution%20and%20use%20in%20source%20and%20binary%20forms%2C%20with%20or%20without%0A%20%20%20%20%20*%20modification%2C%20are%20permitted%20provided%20that%20the%20following%20conditions%20are%0A%20%20%20%20%20*%20met%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%20%20%20%20*%20Redistributions%20of%20source%20code%20must%20retain%20the%20above%20copyright%0A%20%20%20%20%20*%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer.%0A%20%20%20%20%20*%20%20%20%20%20*%20Redistributions%20in%20binary%20form%20must%20reproduce%20the%20above%0A%20%20%20%20%20*%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer%0A%20%20%20%20%20*%20in%20the%20documentation%20and%2For%20other%20materials%20provided%20with%20the%0A%20%20%20%20%20*%20distribution.%0A%20%20%20%20%20*%20%20%20%20%20*%20Neither%20the%20name%20of%20GFXFundamentals.%20nor%20the%20names%20of%20his%0A%20%20%20%20%20*%20contributors%20may%20be%20used%20to%20endorse%20or%20promote%20products%20derived%20from%0A%20%20%20%20%20*%20this%20software%20without%20specific%20prior%20written%20permission.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20THIS%20SOFTWARE%20IS%20PROVIDED%20BY%20THE%20COPYRIGHT%20HOLDERS%20AND%20CONTRIBUTORS%0A%20%20%20%20%20*%20%22AS%20IS%22%20AND%20ANY%20EXPRESS%20OR%20IMPLIED%20WARRANTIES%2C%20INCLUDING%2C%20BUT%20NOT%0A%20%20%20%20%20*%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%20MERCHANTABILITY%20AND%20FITNESS%20FOR%0A%20%20%20%20%20*%20A%20PARTICULAR%20PURPOSE%20ARE%20DISCLAIMED.%20IN%20NO%20EVENT%20SHALL%20THE%20COPYRIGHT%0A%20%20%20%20%20*%20OWNER%20OR%20CONTRIBUTORS%20BE%20LIABLE%20FOR%20ANY%20DIRECT%2C%20INDIRECT%2C%20INCIDENTAL%2C%0A%20%20%20%20%20*%20SPECIAL%2C%20EXEMPLARY%2C%20OR%20CONSEQUENTIAL%20DAMAGES%20(INCLUDING%2C%20BUT%20NOT%0A%20%20%20%20%20*%20LIMITED%20TO%2C%20PROCUREMENT%20OF%20SUBSTITUTE%20GOODS%20OR%20SERVICES%3B%20LOSS%20OF%20USE%2C%0A%20%20%20%20%20*%20DATA%2C%20OR%20PROFITS%3B%20OR%20BUSINESS%20INTERRUPTION)%20HOWEVER%20CAUSED%20AND%20ON%20ANY%0A%20%20%20%20%20*%20THEORY%20OF%20LIABILITY%2C%20WHETHER%20IN%20CONTRACT%2C%20STRICT%20LIABILITY%2C%20OR%20TORT%0A%20%20%20%20%20*%20(INCLUDING%20NEGLIGENCE%20OR%20OTHERWISE)%20ARISING%20IN%20ANY%20WAY%20OUT%20OF%20THE%20USE%0A%20%20%20%20%20*%20OF%20THIS%20SOFTWARE%2C%20EVEN%20IF%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%20SUCH%20DAMAGE.%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20An%20array%20or%20typed%20array%20with%203%20values.%0A%20%20%20%20%20*%20%40typedef%20%7Bnumber%5B%5D%7CFloat32Array%7D%20Vector3%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20An%20array%20or%20typed%20array%20with%204%20values.%0A%20%20%20%20%20*%20%40typedef%20%7Bnumber%5B%5D%7CFloat32Array%7D%20Vector4%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20An%20array%20or%20typed%20array%20with%2016%20values.%0A%20%20%20%20%20*%20%40typedef%20%7Bnumber%5B%5D%7CFloat32Array%7D%20Matrix4%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20let%20MatType%20%3D%20Float32Array%3B%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20type%20this%20library%20creates%20for%20a%20Mat4%0A%20%20%20%20%20*%20%40param%20%7BFloat32ArrayConstructor%7D%20Ctor%20the%20constructor%20for%20the%20type.%20Either%20%60Float32Array%60%20or%20%60Array%60%0A%20%20%20%20%20*%20%40return%20%7BFloat32ArrayConstructor%7D%20previous%20constructor%20for%20Mat4%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20setDefaultType(Ctor)%20%7B%0A%20%20%20%20%20%20const%20OldType%20%3D%20MatType%3B%0A%20%20%20%20%20%20MatType%20%3D%20Ctor%3B%0A%20%20%20%20%20%20return%20OldType%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20two%204-by-4%20matrices%2C%20a%20and%20b%2C%20and%20computes%20the%20product%20in%20the%20order%0A%20%20%20%20%20*%20that%20pre-composes%20b%20with%20a.%20%20In%20other%20words%2C%20the%20matrix%20returned%20will%0A%20%20%20%20%20*%20transform%20by%20b%20first%20and%20then%20a.%20%20Note%20this%20is%20subtly%20different%20from%20just%0A%20%20%20%20%20*%20multiplying%20the%20matrices%20together.%20%20For%20given%20a%20and%20b%2C%20this%20function%20returns%0A%20%20%20%20%20*%20the%20same%20object%20in%20both%20row-major%20and%20column-major%20mode.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20a%20A%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20b%20A%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20multiply(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20b00%20%3D%20b%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b01%20%3D%20b%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b02%20%3D%20b%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b03%20%3D%20b%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20b10%20%3D%20b%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b11%20%3D%20b%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b12%20%3D%20b%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b13%20%3D%20b%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20b20%20%3D%20b%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b21%20%3D%20b%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b22%20%3D%20b%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b23%20%3D%20b%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20b30%20%3D%20b%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b31%20%3D%20b%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b32%20%3D%20b%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b33%20%3D%20b%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a00%20%3D%20a%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a01%20%3D%20a%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a02%20%3D%20a%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a03%20%3D%20a%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a10%20%3D%20a%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20a%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20a%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a13%20%3D%20a%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a20%20%3D%20a%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20a%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20a%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a23%20%3D%20a%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a30%20%3D%20a%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a31%20%3D%20a%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a32%20%3D%20a%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a33%20%3D%20a%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20b00%20*%20a00%20%2B%20b01%20*%20a10%20%2B%20b02%20*%20a20%20%2B%20b03%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20b00%20*%20a01%20%2B%20b01%20*%20a11%20%2B%20b02%20*%20a21%20%2B%20b03%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20b00%20*%20a02%20%2B%20b01%20*%20a12%20%2B%20b02%20*%20a22%20%2B%20b03%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20b00%20*%20a03%20%2B%20b01%20*%20a13%20%2B%20b02%20*%20a23%20%2B%20b03%20*%20a33%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20b10%20*%20a00%20%2B%20b11%20*%20a10%20%2B%20b12%20*%20a20%20%2B%20b13%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20b10%20*%20a01%20%2B%20b11%20*%20a11%20%2B%20b12%20*%20a21%20%2B%20b13%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20b10%20*%20a02%20%2B%20b11%20*%20a12%20%2B%20b12%20*%20a22%20%2B%20b13%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20b10%20*%20a03%20%2B%20b11%20*%20a13%20%2B%20b12%20*%20a23%20%2B%20b13%20*%20a33%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20b20%20*%20a00%20%2B%20b21%20*%20a10%20%2B%20b22%20*%20a20%20%2B%20b23%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20b20%20*%20a01%20%2B%20b21%20*%20a11%20%2B%20b22%20*%20a21%20%2B%20b23%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20b20%20*%20a02%20%2B%20b21%20*%20a12%20%2B%20b22%20*%20a22%20%2B%20b23%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20b20%20*%20a03%20%2B%20b21%20*%20a13%20%2B%20b22%20*%20a23%20%2B%20b23%20*%20a33%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20b30%20*%20a00%20%2B%20b31%20*%20a10%20%2B%20b32%20*%20a20%20%2B%20b33%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20b30%20*%20a01%20%2B%20b31%20*%20a11%20%2B%20b32%20*%20a21%20%2B%20b33%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20b30%20*%20a02%20%2B%20b31%20*%20a12%20%2B%20b32%20*%20a22%20%2B%20b33%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20b30%20*%20a03%20%2B%20b31%20*%20a13%20%2B%20b32%20*%20a23%20%2B%20b33%20*%20a33%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20adds%202%20vectors3s%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20b%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20addVectors(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20a%5B0%5D%20%2B%20b%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20a%5B1%5D%20%2B%20b%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20a%5B2%5D%20%2B%20b%5B2%5D%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20subtracts%202%20vectors3s%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20b%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20subtractVectors(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20a%5B0%5D%20-%20b%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20a%5B1%5D%20-%20b%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20a%5B2%5D%20-%20b%5B2%5D%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20scale%20vectors3%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%0A%20%20%20%20%20*%20%40param%20%7BNumber%7D%20s%20scale%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20scaleVector(v%2C%20s%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20v%5B0%5D%20*%20s%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20v%5B1%5D%20*%20s%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20v%5B2%5D%20*%20s%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20normalizes%20a%20vector.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%20to%20normalize%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20normalize(v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(v%5B0%5D%20*%20v%5B0%5D%20%2B%20v%5B1%5D%20*%20v%5B1%5D%20%2B%20v%5B2%5D%20*%20v%5B2%5D)%3B%0A%20%20%20%20%20%20%2F%2F%20make%20sure%20we%20don't%20divide%20by%200.%0A%20%20%20%20%20%20if%20(length%20%3E%200.00001)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20v%5B0%5D%20%2F%20length%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20v%5B1%5D%20%2F%20length%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20v%5B2%5D%20%2F%20length%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20length%20of%20a%20vector%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%20to%20take%20length%20of%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20length%20of%20vector%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20length(v)%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(v%5B0%5D%20*%20v%5B0%5D%20%2B%20v%5B1%5D%20*%20v%5B1%5D%20%2B%20v%5B2%5D%20*%20v%5B2%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20length%20squared%20of%20a%20vector%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%20to%20take%20length%20of%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20length%20sqaured%20of%20vector%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20lengthSq(v)%20%7B%0A%20%20%20%20%20%20return%20v%5B0%5D%20*%20v%5B0%5D%20%2B%20v%5B1%5D%20*%20v%5B1%5D%20%2B%20v%5B2%5D%20*%20v%5B2%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20cross%20product%20of%202%20vectors3s%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20b%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20cross(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20a%5B1%5D%20*%20b%5B2%5D%20-%20a%5B2%5D%20*%20b%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20a%5B2%5D%20*%20b%5B0%5D%20-%20a%5B0%5D%20*%20b%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20a%5B0%5D%20*%20b%5B1%5D%20-%20a%5B1%5D%20*%20b%5B0%5D%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20dot%20product%20of%20two%20vectors%3B%20assumes%20both%20vectors%20have%0A%20%20%20%20%20*%20three%20entries.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20Operand%20vector.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20Operand%20vector.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20dot%20product%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20dot(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20a%5B0%5D%20*%20b%5B0%5D%20%2B%20a%5B1%5D%20*%20b%5B1%5D%20%2B%20a%5B2%5D%20*%20b%5B2%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20distance%20squared%20between%202%20points%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20distance%20squared%20between%20a%20and%20b%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20distanceSq(a%2C%20b)%20%7B%0A%20%20%20%20%20%20const%20dx%20%3D%20a%5B0%5D%20-%20b%5B0%5D%3B%0A%20%20%20%20%20%20const%20dy%20%3D%20a%5B1%5D%20-%20b%5B1%5D%3B%0A%20%20%20%20%20%20const%20dz%20%3D%20a%5B2%5D%20-%20b%5B2%5D%3B%0A%20%20%20%20%20%20return%20dx%20*%20dx%20%2B%20dy%20*%20dy%20%2B%20dz%20*%20dz%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20distance%20between%202%20points%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20distance%20between%20a%20and%20b%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20distance(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(distanceSq(a%2C%20b))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20identity%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20identity(dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Transposes%20a%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20transpose.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transpose(m%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B11%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Creates%20a%20lookAt%20matrix.%0A%20%20%20%20%20*%20This%20is%20a%20world%20matrix%20for%20a%20camera.%20In%20other%20words%20it%20will%20transform%0A%20%20%20%20%20*%20from%20the%20origin%20to%20a%20place%20and%20orientation%20in%20the%20world.%20For%20a%20view%0A%20%20%20%20%20*%20matrix%20take%20the%20inverse%20of%20this.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20cameraPosition%20position%20of%20the%20camera%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20target%20position%20of%20the%20target%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20up%20direction%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20lookAt(cameraPosition%2C%20target%2C%20up%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20zAxis%20%3D%20normalize(subtractVectors(cameraPosition%2C%20target))%3B%0A%20%20%20%20%20%20var%20xAxis%20%3D%20normalize(cross(up%2C%20zAxis))%3B%0A%20%20%20%20%20%20var%20yAxis%20%3D%20normalize(cross(zAxis%2C%20xAxis))%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20xAxis%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20xAxis%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20xAxis%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20yAxis%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20yAxis%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20yAxis%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20zAxis%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20zAxis%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20zAxis%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20cameraPosition%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20cameraPosition%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20cameraPosition%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20a%204-by-4%20perspective%20transformation%20matrix%20given%20the%20angular%20height%0A%20%20%20%20%20*%20of%20the%20frustum%2C%20the%20aspect%20ratio%2C%20and%20the%20near%20and%20far%20clipping%20planes.%20%20The%0A%20%20%20%20%20*%20arguments%20define%20a%20frustum%20extending%20in%20the%20negative%20z%20direction.%20%20The%20given%0A%20%20%20%20%20*%20angle%20is%20the%20vertical%20angle%20of%20the%20frustum%2C%20and%20the%20horizontal%20angle%20is%0A%20%20%20%20%20*%20determined%20to%20produce%20the%20given%20aspect%20ratio.%20%20The%20arguments%20near%20and%20far%20are%0A%20%20%20%20%20*%20the%20distances%20to%20the%20near%20and%20far%20clipping%20planes.%20%20Note%20that%20near%20and%20far%0A%20%20%20%20%20*%20are%20not%20z%20coordinates%2C%20but%20rather%20they%20are%20distances%20along%20the%20negative%0A%20%20%20%20%20*%20z-axis.%20%20The%20matrix%20generated%20sends%20the%20viewing%20frustum%20to%20the%20unit%20box.%0A%20%20%20%20%20*%20We%20assume%20a%20unit%20box%20extending%20from%20-1%20to%201%20in%20the%20x%20and%20y%20dimensions%20and%0A%20%20%20%20%20*%20from%20-1%20to%201%20in%20the%20z%20dimension.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20fieldOfViewInRadians%20field%20of%20view%20in%20y%20axis.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20aspect%20aspect%20of%20viewport%20(width%20%2F%20height)%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20near%20near%20Z%20clipping%20plane%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20far%20far%20Z%20clipping%20plane%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20perspective(fieldOfViewInRadians%2C%20aspect%2C%20near%2C%20far%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20f%20%3D%20Math.tan(Math.PI%20*%200.5%20-%200.5%20*%20fieldOfViewInRadians)%3B%0A%20%20%20%20%20%20var%20rangeInv%20%3D%201.0%20%2F%20(near%20-%20far)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20f%20%2F%20aspect%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20f%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20(near%20%2B%20far)%20*%20rangeInv%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20-1%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20near%20*%20far%20*%20rangeInv%20*%202%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20a%204-by-4%20orthographic%20projection%20matrix%20given%20the%20coordinates%20of%20the%0A%20%20%20%20%20*%20planes%20defining%20the%20axis-aligned%2C%20box-shaped%20viewing%20volume.%20%20The%20matrix%0A%20%20%20%20%20*%20generated%20sends%20that%20box%20to%20the%20unit%20box.%20%20Note%20that%20although%20left%20and%20right%0A%20%20%20%20%20*%20are%20x%20coordinates%20and%20bottom%20and%20top%20are%20y%20coordinates%2C%20near%20and%20far%0A%20%20%20%20%20*%20are%20not%20z%20coordinates%2C%20but%20rather%20they%20are%20distances%20along%20the%20negative%0A%20%20%20%20%20*%20z-axis.%20%20We%20assume%20a%20unit%20box%20extending%20from%20-1%20to%201%20in%20the%20x%20and%20y%0A%20%20%20%20%20*%20dimensions%20and%20from%20-1%20to%201%20in%20the%20z%20dimension.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20left%20The%20x%20coordinate%20of%20the%20left%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20right%20The%20x%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20bottom%20The%20y%20coordinate%20of%20the%20bottom%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20top%20The%20y%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20near%20The%20negative%20z%20coordinate%20of%20the%20near%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20far%20The%20negative%20z%20coordinate%20of%20the%20far%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20orthographic(left%2C%20right%2C%20bottom%2C%20top%2C%20near%2C%20far%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%202%20%2F%20(right%20-%20left)%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%202%20%2F%20(top%20-%20bottom)%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%202%20%2F%20(near%20-%20far)%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20(left%20%2B%20right)%20%2F%20(left%20-%20right)%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20(bottom%20%2B%20top)%20%2F%20(bottom%20-%20top)%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20(near%20%2B%20far)%20%2F%20(near%20-%20far)%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20a%204-by-4%20perspective%20transformation%20matrix%20given%20the%20left%2C%20right%2C%0A%20%20%20%20%20*%20top%2C%20bottom%2C%20near%20and%20far%20clipping%20planes.%20The%20arguments%20define%20a%20frustum%0A%20%20%20%20%20*%20extending%20in%20the%20negative%20z%20direction.%20The%20arguments%20near%20and%20far%20are%20the%0A%20%20%20%20%20*%20distances%20to%20the%20near%20and%20far%20clipping%20planes.%20Note%20that%20near%20and%20far%20are%20not%0A%20%20%20%20%20*%20z%20coordinates%2C%20but%20rather%20they%20are%20distances%20along%20the%20negative%20z-axis.%20The%0A%20%20%20%20%20*%20matrix%20generated%20sends%20the%20viewing%20frustum%20to%20the%20unit%20box.%20We%20assume%20a%20unit%0A%20%20%20%20%20*%20box%20extending%20from%20-1%20to%201%20in%20the%20x%20and%20y%20dimensions%20and%20from%20-1%20to%201%20in%20the%20z%0A%20%20%20%20%20*%20dimension.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20left%20The%20x%20coordinate%20of%20the%20left%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20right%20The%20x%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20bottom%20The%20y%20coordinate%20of%20the%20bottom%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20top%20The%20y%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20near%20The%20negative%20z%20coordinate%20of%20the%20near%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20far%20The%20negative%20z%20coordinate%20of%20the%20far%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20frustum(left%2C%20right%2C%20bottom%2C%20top%2C%20near%2C%20far%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20dx%20%3D%20right%20-%20left%3B%0A%20%20%20%20%20%20var%20dy%20%3D%20top%20-%20bottom%3B%0A%20%20%20%20%20%20var%20dz%20%3D%20far%20-%20near%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20(2%20*%20near)%20%2F%20dx%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20(2%20*%20near)%20%2F%20dy%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20(left%20%2B%20right)%20%2F%20dx%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20(top%20%2B%20bottom)%20%2F%20dy%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20-(far%20%2B%20near)%20%2F%20dz%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20-1%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20(-2%20*%20near%20*%20far)%20%2F%20dz%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20a%20translation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tx%20x%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20ty%20y%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tz%20z%20translation.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20translation(tx%2C%20ty%2C%20tz%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20tx%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20ty%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20tz%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20translation%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tx%20x%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20ty%20y%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tz%20z%20translation.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20translate(m%2C%20tx%2C%20ty%2C%20tz%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20translation(tx%2C%20ty%2C%20tz)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m30%20%3D%20m%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m31%20%3D%20m%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m32%20%3D%20m%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m33%20%3D%20m%5B3%20*%204%20%2B%203%5D%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20m00%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20m01%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20m02%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20m03%3B%0A%20%20%20%20%20%20%20%20dst%5B4%5D%20%3D%20m10%3B%0A%20%20%20%20%20%20%20%20dst%5B5%5D%20%3D%20m11%3B%0A%20%20%20%20%20%20%20%20dst%5B6%5D%20%3D%20m12%3B%0A%20%20%20%20%20%20%20%20dst%5B7%5D%20%3D%20m13%3B%0A%20%20%20%20%20%20%20%20dst%5B8%5D%20%3D%20m20%3B%0A%20%20%20%20%20%20%20%20dst%5B9%5D%20%3D%20m21%3B%0A%20%20%20%20%20%20%20%20dst%5B10%5D%20%3D%20m22%3B%0A%20%20%20%20%20%20%20%20dst%5B11%5D%20%3D%20m23%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20m00%20*%20tx%20%2B%20m10%20*%20ty%20%2B%20m20%20*%20tz%20%2B%20m30%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20m01%20*%20tx%20%2B%20m11%20*%20ty%20%2B%20m21%20*%20tz%20%2B%20m31%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20m02%20*%20tx%20%2B%20m12%20*%20ty%20%2B%20m22%20*%20tz%20%2B%20m32%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20m03%20*%20tx%20%2B%20m13%20*%20ty%20%2B%20m23%20*%20tz%20%2B%20m33%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20x%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20xRotation(angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20s%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20-s%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20x%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20xRotate(m%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20xRotation(angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B11%5D%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20c%20*%20m10%20%2B%20s%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%20*%20m11%20%2B%20s%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20c%20*%20m12%20%2B%20s%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20c%20*%20m13%20%2B%20s%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20c%20*%20m20%20-%20s%20*%20m10%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20c%20*%20m21%20-%20s%20*%20m11%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%20*%20m22%20-%20s%20*%20m12%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20c%20*%20m23%20-%20s%20*%20m13%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20y%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20yRotation(angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20-s%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20s%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20y%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20yRotate(m%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20yRotation(angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%20*%20m00%20-%20s%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20c%20*%20m01%20-%20s%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20c%20*%20m02%20-%20s%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20c%20*%20m03%20-%20s%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20c%20*%20m20%20%2B%20s%20*%20m00%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20c%20*%20m21%20%2B%20s%20*%20m01%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%20*%20m22%20%2B%20s%20*%20m02%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20c%20*%20m23%20%2B%20s%20*%20m03%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B4%5D%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B5%5D%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B6%5D%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B7%5D%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20z%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20zRotation(angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20s%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20-s%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20z%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20zRotate(m%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20zRotation(angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%20*%20m00%20%2B%20s%20*%20m10%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20c%20*%20m01%20%2B%20s%20*%20m11%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20c%20*%20m02%20%2B%20s%20*%20m12%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20c%20*%20m03%20%2B%20s%20*%20m13%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20c%20*%20m10%20-%20s%20*%20m00%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%20*%20m11%20-%20s%20*%20m01%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20c%20*%20m12%20-%20s%20*%20m02%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20c%20*%20m13%20-%20s%20*%20m03%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B8%5D%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B9%5D%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B10%5D%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B11%5D%20%3D%20m%5B11%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20rotation%20matrix%20around%20an%20arbitrary%20axis%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20axis%20axis%20to%20rotate%20around%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20axisRotation(axis%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20x%20%3D%20axis%5B0%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20axis%5B1%5D%3B%0A%20%20%20%20%20%20var%20z%20%3D%20axis%5B2%5D%3B%0A%20%20%20%20%20%20var%20n%20%3D%20Math.sqrt(x%20*%20x%20%2B%20y%20*%20y%20%2B%20z%20*%20z)%3B%0A%20%20%20%20%20%20x%20%2F%3D%20n%3B%0A%20%20%20%20%20%20y%20%2F%3D%20n%3B%0A%20%20%20%20%20%20z%20%2F%3D%20n%3B%0A%20%20%20%20%20%20var%20xx%20%3D%20x%20*%20x%3B%0A%20%20%20%20%20%20var%20yy%20%3D%20y%20*%20y%3B%0A%20%20%20%20%20%20var%20zz%20%3D%20z%20*%20z%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%20%20%20%20%20%20var%20oneMinusCosine%20%3D%201%20-%20c%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20xx%20%2B%20(1%20-%20xx)%20*%20c%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20x%20*%20y%20*%20oneMinusCosine%20%2B%20z%20*%20s%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20x%20*%20z%20*%20oneMinusCosine%20-%20y%20*%20s%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20x%20*%20y%20*%20oneMinusCosine%20-%20z%20*%20s%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20yy%20%2B%20(1%20-%20yy)%20*%20c%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20y%20*%20z%20*%20oneMinusCosine%20%2B%20x%20*%20s%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20x%20*%20z%20*%20oneMinusCosine%20%2B%20y%20*%20s%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20y%20*%20z%20*%20oneMinusCosine%20-%20x%20*%20s%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20zz%20%2B%20(1%20-%20zz)%20*%20c%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20axis%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20axis%20axis%20to%20rotate%20around%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20axisRotate(m%2C%20axis%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20axisRotation(axis%2C%20angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20x%20%3D%20axis%5B0%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20axis%5B1%5D%3B%0A%20%20%20%20%20%20var%20z%20%3D%20axis%5B2%5D%3B%0A%20%20%20%20%20%20var%20n%20%3D%20Math.sqrt(x%20*%20x%20%2B%20y%20*%20y%20%2B%20z%20*%20z)%3B%0A%20%20%20%20%20%20x%20%2F%3D%20n%3B%0A%20%20%20%20%20%20y%20%2F%3D%20n%3B%0A%20%20%20%20%20%20z%20%2F%3D%20n%3B%0A%20%20%20%20%20%20var%20xx%20%3D%20x%20*%20x%3B%0A%20%20%20%20%20%20var%20yy%20%3D%20y%20*%20y%3B%0A%20%20%20%20%20%20var%20zz%20%3D%20z%20*%20z%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%20%20%20%20%20%20var%20oneMinusCosine%20%3D%201%20-%20c%3B%0A%0A%20%20%20%20%20%20var%20r00%20%3D%20xx%20%2B%20(1%20-%20xx)%20*%20c%3B%0A%20%20%20%20%20%20var%20r01%20%3D%20x%20*%20y%20*%20oneMinusCosine%20%2B%20z%20*%20s%3B%0A%20%20%20%20%20%20var%20r02%20%3D%20x%20*%20z%20*%20oneMinusCosine%20-%20y%20*%20s%3B%0A%20%20%20%20%20%20var%20r10%20%3D%20x%20*%20y%20*%20oneMinusCosine%20-%20z%20*%20s%3B%0A%20%20%20%20%20%20var%20r11%20%3D%20yy%20%2B%20(1%20-%20yy)%20*%20c%3B%0A%20%20%20%20%20%20var%20r12%20%3D%20y%20*%20z%20*%20oneMinusCosine%20%2B%20x%20*%20s%3B%0A%20%20%20%20%20%20var%20r20%20%3D%20x%20*%20z%20*%20oneMinusCosine%20%2B%20y%20*%20s%3B%0A%20%20%20%20%20%20var%20r21%20%3D%20y%20*%20z%20*%20oneMinusCosine%20-%20x%20*%20s%3B%0A%20%20%20%20%20%20var%20r22%20%3D%20zz%20%2B%20(1%20-%20zz)%20*%20c%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B11%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20r00%20*%20m00%20%2B%20r01%20*%20m10%20%2B%20r02%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20r00%20*%20m01%20%2B%20r01%20*%20m11%20%2B%20r02%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20r00%20*%20m02%20%2B%20r01%20*%20m12%20%2B%20r02%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20r00%20*%20m03%20%2B%20r01%20*%20m13%20%2B%20r02%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20r10%20*%20m00%20%2B%20r11%20*%20m10%20%2B%20r12%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20r10%20*%20m01%20%2B%20r11%20*%20m11%20%2B%20r12%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20r10%20*%20m02%20%2B%20r11%20*%20m12%20%2B%20r12%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20r10%20*%20m03%20%2B%20r11%20*%20m13%20%2B%20r12%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20r20%20*%20m00%20%2B%20r21%20*%20m10%20%2B%20r22%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20r20%20*%20m01%20%2B%20r21%20*%20m11%20%2B%20r22%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20r20%20*%20m02%20%2B%20r21%20*%20m12%20%2B%20r22%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20r20%20*%20m03%20%2B%20r21%20*%20m13%20%2B%20r22%20*%20m23%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20a%20scale%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sx%20x%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sy%20y%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sz%20z%20scale.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20scaling(sx%2C%20sy%2C%20sz%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20sx%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20sy%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20sz%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20a%20scaling%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sx%20x%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sy%20y%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sz%20z%20scale.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20scale(m%2C%20sx%2C%20sy%2C%20sz%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20scaling(sx%2C%20sy%2C%20sz)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%203%5D%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20creates%20a%20matrix%20from%20translation%2C%20quaternion%2C%20scale%0A%20%20%20%20%20*%20%40param%20%7BNumber%5B%5D%7D%20translation%20%5Bx%2C%20y%2C%20z%5D%20translation%0A%20%20%20%20%20*%20%40param%20%7BNumber%5B%5D%7D%20quaternion%20%5Bx%2C%20y%2C%20z%2C%20z%5D%20quaternion%20rotation%0A%20%20%20%20%20*%20%40param%20%7BNumber%5B%5D%7D%20scale%20%5Bx%2C%20y%2C%20z%5D%20scale%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20compose(translation%2C%20quaternion%2C%20scale%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20quaternion%5B0%5D%3B%0A%20%20%20%20%20%20const%20y%20%3D%20quaternion%5B1%5D%3B%0A%20%20%20%20%20%20const%20z%20%3D%20quaternion%5B2%5D%3B%0A%20%20%20%20%20%20const%20w%20%3D%20quaternion%5B3%5D%3B%0A%0A%20%20%20%20%20%20const%20x2%20%3D%20x%20%2B%20x%3B%0A%20%20%20%20%20%20const%20y2%20%3D%20y%20%2B%20y%3B%0A%20%20%20%20%20%20const%20z2%20%3D%20z%20%2B%20z%3B%0A%0A%20%20%20%20%20%20const%20xx%20%3D%20x%20*%20x2%3B%0A%20%20%20%20%20%20const%20xy%20%3D%20x%20*%20y2%3B%0A%20%20%20%20%20%20const%20xz%20%3D%20x%20*%20z2%3B%0A%0A%20%20%20%20%20%20const%20yy%20%3D%20y%20*%20y2%3B%0A%20%20%20%20%20%20const%20yz%20%3D%20y%20*%20z2%3B%0A%20%20%20%20%20%20const%20zz%20%3D%20z%20*%20z2%3B%0A%0A%20%20%20%20%20%20const%20wx%20%3D%20w%20*%20x2%3B%0A%20%20%20%20%20%20const%20wy%20%3D%20w%20*%20y2%3B%0A%20%20%20%20%20%20const%20wz%20%3D%20w%20*%20z2%3B%0A%0A%20%20%20%20%20%20const%20sx%20%3D%20scale%5B0%5D%3B%0A%20%20%20%20%20%20const%20sy%20%3D%20scale%5B1%5D%3B%0A%20%20%20%20%20%20const%20sz%20%3D%20scale%5B2%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20(1%20-%20(yy%20%2B%20zz))%20*%20sx%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20(xy%20%2B%20wz)%20*%20sx%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20(xz%20-%20wy)%20*%20sx%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20(xy%20-%20wz)%20*%20sy%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20(1%20-%20(xx%20%2B%20zz))%20*%20sy%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20(yz%20%2B%20wx)%20*%20sy%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20(xz%20%2B%20wy)%20*%20sz%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20(yz%20-%20wx)%20*%20sz%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20(1%20-%20(xx%20%2B%20yy))%20*%20sz%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20translation%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20translation%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20translation%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20quatFromRotationMatrix(m%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20http%3A%2F%2Fwww.euclideanspace.com%2Fmaths%2Fgeometry%2Frotations%2Fconversions%2FmatrixToQuaternion%2Findex.htm%0A%0A%20%20%20%20%20%20%2F%2F%20assumes%20the%20upper%203x3%20of%20m%20is%20a%20pure%20rotation%20matrix%20(i.e%2C%20unscaled)%0A%20%20%20%20%20%20const%20m11%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20const%20m12%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20const%20m13%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20const%20m21%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20const%20m22%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20const%20m23%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20const%20m31%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20const%20m32%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20const%20m33%20%3D%20m%5B10%5D%3B%0A%0A%20%20%20%20%20%20const%20trace%20%3D%20m11%20%2B%20m22%20%2B%20m33%3B%0A%0A%20%20%20%20%20%20if%20(trace%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%200.5%20%2F%20Math.sqrt(trace%20%2B%201)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%200.25%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20(m32%20-%20m23)%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20(m13%20-%20m31)%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20(m21%20-%20m12)%20*%20s%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(m11%20%3E%20m22%20%26%26%20m11%20%3E%20m33)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%202%20*%20Math.sqrt(1%20%2B%20m11%20-%20m22%20-%20m33)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20(m32%20-%20m23)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%200.25%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20(m12%20%2B%20m21)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20(m13%20%2B%20m31)%20%2F%20s%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(m22%20%3E%20m33)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%202%20*%20Math.sqrt(1%20%2B%20m22%20-%20m11%20-%20m33)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20(m13%20-%20m31)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20(m12%20%2B%20m21)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%200.25%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20(m23%20%2B%20m32)%20%2F%20s%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%202%20*%20Math.sqrt(1%20%2B%20m33%20-%20m11%20-%20m22)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20(m21%20-%20m12)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20(m13%20%2B%20m31)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20(m23%20%2B%20m32)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%200.25%20*%20s%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20decompose(mat%2C%20translation%2C%20quaternion%2C%20scale)%20%7B%0A%20%20%20%20%20%20let%20sx%20%3D%20length(mat.slice(0%2C%203))%3B%0A%20%20%20%20%20%20const%20sy%20%3D%20length(mat.slice(4%2C%207))%3B%0A%20%20%20%20%20%20const%20sz%20%3D%20length(mat.slice(8%2C%2011))%3B%0A%0A%20%20%20%20%20%20%2F%2F%20if%20determinate%20is%20negative%2C%20we%20need%20to%20invert%20one%20scale%0A%20%20%20%20%20%20const%20det%20%3D%20determinate(mat)%3B%0A%20%20%20%20%20%20if%20(det%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20sx%20%3D%20-sx%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20translation%5B0%5D%20%3D%20mat%5B12%5D%3B%0A%20%20%20%20%20%20translation%5B1%5D%20%3D%20mat%5B13%5D%3B%0A%20%20%20%20%20%20translation%5B2%5D%20%3D%20mat%5B14%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20scale%20the%20rotation%20part%0A%20%20%20%20%20%20const%20matrix%20%3D%20copy(mat)%3B%0A%0A%20%20%20%20%20%20const%20invSX%20%3D%201%20%2F%20sx%3B%0A%20%20%20%20%20%20const%20invSY%20%3D%201%20%2F%20sy%3B%0A%20%20%20%20%20%20const%20invSZ%20%3D%201%20%2F%20sz%3B%0A%0A%20%20%20%20%20%20matrix%5B0%5D%20*%3D%20invSX%3B%0A%20%20%20%20%20%20matrix%5B1%5D%20*%3D%20invSX%3B%0A%20%20%20%20%20%20matrix%5B2%5D%20*%3D%20invSX%3B%0A%0A%20%20%20%20%20%20matrix%5B4%5D%20*%3D%20invSY%3B%0A%20%20%20%20%20%20matrix%5B5%5D%20*%3D%20invSY%3B%0A%20%20%20%20%20%20matrix%5B6%5D%20*%3D%20invSY%3B%0A%0A%20%20%20%20%20%20matrix%5B8%5D%20*%3D%20invSZ%3B%0A%20%20%20%20%20%20matrix%5B9%5D%20*%3D%20invSZ%3B%0A%20%20%20%20%20%20matrix%5B10%5D%20*%3D%20invSZ%3B%0A%0A%20%20%20%20%20%20quatFromRotationMatrix(matrix%2C%20quaternion)%3B%0A%0A%20%20%20%20%20%20scale%5B0%5D%20%3D%20sx%3B%0A%20%20%20%20%20%20scale%5B1%5D%20%3D%20sy%3B%0A%20%20%20%20%20%20scale%5B2%5D%20%3D%20sz%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20determinate(m)%20%7B%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m30%20%3D%20m%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m31%20%3D%20m%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m32%20%3D%20m%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m33%20%3D%20m%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20tmp_0%20%3D%20m22%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_1%20%3D%20m32%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_2%20%3D%20m12%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_3%20%3D%20m32%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_4%20%3D%20m12%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_5%20%3D%20m22%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_6%20%3D%20m02%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_7%20%3D%20m32%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_8%20%3D%20m02%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_9%20%3D%20m22%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_10%20%3D%20m02%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_11%20%3D%20m12%20*%20m03%3B%0A%0A%20%20%20%20%20%20var%20t0%20%3D%0A%20%20%20%20%20%20%20%20tmp_0%20*%20m11%20%2B%0A%20%20%20%20%20%20%20%20tmp_3%20*%20m21%20%2B%0A%20%20%20%20%20%20%20%20tmp_4%20*%20m31%20-%0A%20%20%20%20%20%20%20%20(tmp_1%20*%20m11%20%2B%20tmp_2%20*%20m21%20%2B%20tmp_5%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t1%20%3D%0A%20%20%20%20%20%20%20%20tmp_1%20*%20m01%20%2B%0A%20%20%20%20%20%20%20%20tmp_6%20*%20m21%20%2B%0A%20%20%20%20%20%20%20%20tmp_9%20*%20m31%20-%0A%20%20%20%20%20%20%20%20(tmp_0%20*%20m01%20%2B%20tmp_7%20*%20m21%20%2B%20tmp_8%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t2%20%3D%0A%20%20%20%20%20%20%20%20tmp_2%20*%20m01%20%2B%0A%20%20%20%20%20%20%20%20tmp_7%20*%20m11%20%2B%0A%20%20%20%20%20%20%20%20tmp_10%20*%20m31%20-%0A%20%20%20%20%20%20%20%20(tmp_3%20*%20m01%20%2B%20tmp_6%20*%20m11%20%2B%20tmp_11%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t3%20%3D%0A%20%20%20%20%20%20%20%20tmp_5%20*%20m01%20%2B%0A%20%20%20%20%20%20%20%20tmp_8%20*%20m11%20%2B%0A%20%20%20%20%20%20%20%20tmp_11%20*%20m21%20-%0A%20%20%20%20%20%20%20%20(tmp_4%20*%20m01%20%2B%20tmp_9%20*%20m11%20%2B%20tmp_10%20*%20m21)%3B%0A%0A%20%20%20%20%20%20return%201.0%20%2F%20(m00%20*%20t0%20%2B%20m10%20*%20t1%20%2B%20m20%20*%20t2%20%2B%20m30%20*%20t3)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20inverse%20of%20a%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20compute%20inverse%20of%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20inverse(m%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m30%20%3D%20m%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m31%20%3D%20m%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m32%20%3D%20m%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m33%20%3D%20m%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20tmp_0%20%3D%20m22%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_1%20%3D%20m32%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_2%20%3D%20m12%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_3%20%3D%20m32%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_4%20%3D%20m12%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_5%20%3D%20m22%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_6%20%3D%20m02%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_7%20%3D%20m32%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_8%20%3D%20m02%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_9%20%3D%20m22%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_10%20%3D%20m02%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_11%20%3D%20m12%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_12%20%3D%20m20%20*%20m31%3B%0A%20%20%20%20%20%20var%20tmp_13%20%3D%20m30%20*%20m21%3B%0A%20%20%20%20%20%20var%20tmp_14%20%3D%20m10%20*%20m31%3B%0A%20%20%20%20%20%20var%20tmp_15%20%3D%20m30%20*%20m11%3B%0A%20%20%20%20%20%20var%20tmp_16%20%3D%20m10%20*%20m21%3B%0A%20%20%20%20%20%20var%20tmp_17%20%3D%20m20%20*%20m11%3B%0A%20%20%20%20%20%20var%20tmp_18%20%3D%20m00%20*%20m31%3B%0A%20%20%20%20%20%20var%20tmp_19%20%3D%20m30%20*%20m01%3B%0A%20%20%20%20%20%20var%20tmp_20%20%3D%20m00%20*%20m21%3B%0A%20%20%20%20%20%20var%20tmp_21%20%3D%20m20%20*%20m01%3B%0A%20%20%20%20%20%20var%20tmp_22%20%3D%20m00%20*%20m11%3B%0A%20%20%20%20%20%20var%20tmp_23%20%3D%20m10%20*%20m01%3B%0A%0A%20%20%20%20%20%20var%20t0%20%3D%0A%20%20%20%20%20%20%20%20tmp_0%20*%20m11%20%2B%0A%20%20%20%20%20%20%20%20tmp_3%20*%20m21%20%2B%0A%20%20%20%20%20%20%20%20tmp_4%20*%20m31%20-%0A%20%20%20%20%20%20%20%20(tmp_1%20*%20m11%20%2B%20tmp_2%20*%20m21%20%2B%20tmp_5%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t1%20%3D%0A%20%20%20%20%20%20%20%20tmp_1%20*%20m01%20%2B%0A%20%20%20%20%20%20%20%20tmp_6%20*%20m21%20%2B%0A%20%20%20%20%20%20%20%20tmp_9%20*%20m31%20-%0A%20%20%20%20%20%20%20%20(tmp_0%20*%20m01%20%2B%20tmp_7%20*%20m21%20%2B%20tmp_8%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t2%20%3D%0A%20%20%20%20%20%20%20%20tmp_2%20*%20m01%20%2B%0A%20%20%20%20%20%20%20%20tmp_7%20*%20m11%20%2B%0A%20%20%20%20%20%20%20%20tmp_10%20*%20m31%20-%0A%20%20%20%20%20%20%20%20(tmp_3%20*%20m01%20%2B%20tmp_6%20*%20m11%20%2B%20tmp_11%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t3%20%3D%0A%20%20%20%20%20%20%20%20tmp_5%20*%20m01%20%2B%0A%20%20%20%20%20%20%20%20tmp_8%20*%20m11%20%2B%0A%20%20%20%20%20%20%20%20tmp_11%20*%20m21%20-%0A%20%20%20%20%20%20%20%20(tmp_4%20*%20m01%20%2B%20tmp_9%20*%20m11%20%2B%20tmp_10%20*%20m21)%3B%0A%0A%20%20%20%20%20%20var%20d%20%3D%201.0%20%2F%20(m00%20*%20t0%20%2B%20m10%20*%20t1%20%2B%20m20%20*%20t2%20%2B%20m30%20*%20t3)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20d%20*%20t0%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20d%20*%20t1%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20d%20*%20t2%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20d%20*%20t3%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_1%20*%20m10%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_2%20*%20m20%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_5%20*%20m30%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_0%20*%20m10%20%2B%20tmp_3%20*%20m20%20%2B%20tmp_4%20*%20m30))%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_0%20*%20m00%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_7%20*%20m20%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_8%20*%20m30%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_1%20*%20m00%20%2B%20tmp_6%20*%20m20%20%2B%20tmp_9%20*%20m30))%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_3%20*%20m00%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_6%20*%20m10%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_11%20*%20m30%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_2%20*%20m00%20%2B%20tmp_7%20*%20m10%20%2B%20tmp_10%20*%20m30))%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_4%20*%20m00%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_9%20*%20m10%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_10%20*%20m20%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_5%20*%20m00%20%2B%20tmp_8%20*%20m10%20%2B%20tmp_11%20*%20m20))%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_12%20*%20m13%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_15%20*%20m23%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_16%20*%20m33%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_13%20*%20m13%20%2B%20tmp_14%20*%20m23%20%2B%20tmp_17%20*%20m33))%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_13%20*%20m03%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_18%20*%20m23%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_21%20*%20m33%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_12%20*%20m03%20%2B%20tmp_19%20*%20m23%20%2B%20tmp_20%20*%20m33))%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_14%20*%20m03%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_19%20*%20m13%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_22%20*%20m33%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_15%20*%20m03%20%2B%20tmp_18%20*%20m13%20%2B%20tmp_23%20*%20m33))%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_17%20*%20m03%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_20%20*%20m13%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_23%20*%20m23%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_16%20*%20m03%20%2B%20tmp_21%20*%20m13%20%2B%20tmp_22%20*%20m23))%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_14%20*%20m22%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_17%20*%20m32%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_13%20*%20m12%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_16%20*%20m32%20%2B%20tmp_12%20*%20m12%20%2B%20tmp_15%20*%20m22))%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_20%20*%20m32%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_12%20*%20m02%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_19%20*%20m22%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_18%20*%20m22%20%2B%20tmp_21%20*%20m32%20%2B%20tmp_13%20*%20m02))%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_18%20*%20m12%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_23%20*%20m32%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_15%20*%20m02%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_22%20*%20m32%20%2B%20tmp_14%20*%20m02%20%2B%20tmp_19%20*%20m12))%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%0A%20%20%20%20%20%20%20%20d%20*%0A%20%20%20%20%20%20%20%20(tmp_22%20*%20m22%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_16%20*%20m02%20%2B%0A%20%20%20%20%20%20%20%20%20%20tmp_21%20*%20m12%20-%0A%20%20%20%20%20%20%20%20%20%20(tmp_20%20*%20m12%20%2B%20tmp_23%20*%20m22%20%2B%20tmp_17%20*%20m02))%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%20%20matrix%20and%20a%20vector%20with%204%20entries%2C%20transforms%20that%20vector%20by%0A%20%20%20%20%20*%20the%20matrix%2C%20and%20returns%20the%20result%20as%20a%20vector%20with%204%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20v%20The%20point%20in%20homogenous%20coordinates.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20dst%20optional%20vector4%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector4%7D%20dst%20or%20new%20Vector4%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformVector(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(4)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%204%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20dst%5Bi%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%204%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20dst%5Bi%5D%20%2B%3D%20v%5Bj%5D%20*%20m%5Bj%20*%204%20%2B%20i%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%204-by-4%20matrix%20and%20a%20vector%20with%203%20entries%2C%0A%20%20%20%20%20*%20interprets%20the%20vector%20as%20a%20point%2C%20transforms%20that%20point%20by%20the%20matrix%2C%20and%0A%20%20%20%20%20*%20returns%20the%20result%20as%20a%20vector%20with%203%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20The%20point.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20dst%20optional%20vector4%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector4%7D%20dst%20or%20new%20Vector4%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformPoint(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20var%20v0%20%3D%20v%5B0%5D%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20v%5B1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20v%5B2%5D%3B%0A%20%20%20%20%20%20var%20d%20%3D%0A%20%20%20%20%20%20%20%20v0%20*%20m%5B0%20*%204%20%2B%203%5D%20%2B%0A%20%20%20%20%20%20%20%20v1%20*%20m%5B1%20*%204%20%2B%203%5D%20%2B%0A%20%20%20%20%20%20%20%20v2%20*%20m%5B2%20*%204%20%2B%203%5D%20%2B%0A%20%20%20%20%20%20%20%20m%5B3%20*%204%20%2B%203%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%0A%20%20%20%20%20%20%20%20(v0%20*%20m%5B0%20*%204%20%2B%200%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20v1%20*%20m%5B1%20*%204%20%2B%200%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20v2%20*%20m%5B2%20*%204%20%2B%200%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20m%5B3%20*%204%20%2B%200%5D)%20%2F%0A%20%20%20%20%20%20%20%20d%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%0A%20%20%20%20%20%20%20%20(v0%20*%20m%5B0%20*%204%20%2B%201%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20v1%20*%20m%5B1%20*%204%20%2B%201%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20v2%20*%20m%5B2%20*%204%20%2B%201%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20m%5B3%20*%204%20%2B%201%5D)%20%2F%0A%20%20%20%20%20%20%20%20d%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%0A%20%20%20%20%20%20%20%20(v0%20*%20m%5B0%20*%204%20%2B%202%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20v1%20*%20m%5B1%20*%204%20%2B%202%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20v2%20*%20m%5B2%20*%204%20%2B%202%5D%20%2B%0A%20%20%20%20%20%20%20%20%20%20m%5B3%20*%204%20%2B%202%5D)%20%2F%0A%20%20%20%20%20%20%20%20d%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%204-by-4%20matrix%20and%20a%20vector%20with%203%20entries%2C%20interprets%20the%20vector%20as%20a%0A%20%20%20%20%20*%20direction%2C%20transforms%20that%20direction%20by%20the%20matrix%2C%20and%20returns%20the%20result%3B%0A%20%20%20%20%20*%20assumes%20the%20transformation%20of%203-dimensional%20space%20represented%20by%20the%20matrix%0A%20%20%20%20%20*%20is%20parallel-preserving%2C%20i.e.%20any%20combination%20of%20rotation%2C%20scaling%20and%0A%20%20%20%20%20*%20translation%2C%20but%20not%20a%20perspective%20distortion.%20Returns%20a%20vector%20with%203%0A%20%20%20%20%20*%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20The%20direction.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20dst%20optional%20vector4%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector4%7D%20dst%20or%20new%20Vector4%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformDirection(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%0A%20%20%20%20%20%20var%20v0%20%3D%20v%5B0%5D%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20v%5B1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20v%5B2%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%200%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%200%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%201%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%201%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%202%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%202%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%202%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%204-by-4%20matrix%20m%20and%20a%20vector%20v%20with%203%20entries%2C%20interprets%20the%20vector%0A%20%20%20%20%20*%20as%20a%20normal%20to%20a%20surface%2C%20and%20computes%20a%20vector%20which%20is%20normal%20upon%0A%20%20%20%20%20*%20transforming%20that%20surface%20by%20the%20matrix.%20The%20effect%20of%20this%20function%20is%20the%0A%20%20%20%20%20*%20same%20as%20transforming%20v%20(as%20a%20direction)%20by%20the%20inverse-transpose%20of%20m.%20%20This%0A%20%20%20%20%20*%20function%20assumes%20the%20transformation%20of%203-dimensional%20space%20represented%20by%20the%0A%20%20%20%20%20*%20matrix%20is%20parallel-preserving%2C%20i.e.%20any%20combination%20of%20rotation%2C%20scaling%20and%0A%20%20%20%20%20*%20translation%2C%20but%20not%20a%20perspective%20distortion.%20%20Returns%20a%20vector%20with%203%0A%20%20%20%20%20*%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20The%20normal.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20The%20direction.%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20The%20transformed%20direction.%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformNormal(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20var%20mi%20%3D%20inverse(m)%3B%0A%20%20%20%20%20%20var%20v0%20%3D%20v%5B0%5D%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20v%5B1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20v%5B2%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20v0%20*%20mi%5B0%20*%204%20%2B%200%5D%20%2B%20v1%20*%20mi%5B0%20*%204%20%2B%201%5D%20%2B%20v2%20*%20mi%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20v0%20*%20mi%5B1%20*%204%20%2B%200%5D%20%2B%20v1%20*%20mi%5B1%20*%204%20%2B%201%5D%20%2B%20v2%20*%20mi%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20v0%20*%20mi%5B2%20*%204%20%2B%200%5D%20%2B%20v1%20*%20mi%5B2%20*%204%20%2B%201%5D%20%2B%20v2%20*%20mi%5B2%20*%204%20%2B%202%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20copy(src%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20src%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20src%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20src%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20src%5B3%5D%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20src%5B4%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20src%5B5%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20src%5B6%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20src%5B7%5D%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20src%5B8%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20src%5B9%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20src%5B10%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20src%5B11%5D%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20src%5B12%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20src%5B13%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20src%5B14%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20src%5B15%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20copy%3A%20copy%2C%0A%20%20%20%20%20%20lookAt%3A%20lookAt%2C%0A%20%20%20%20%20%20addVectors%3A%20addVectors%2C%0A%20%20%20%20%20%20subtractVectors%3A%20subtractVectors%2C%0A%20%20%20%20%20%20scaleVector%3A%20scaleVector%2C%0A%20%20%20%20%20%20distance%3A%20distance%2C%0A%20%20%20%20%20%20distanceSq%3A%20distanceSq%2C%0A%20%20%20%20%20%20normalize%3A%20normalize%2C%0A%20%20%20%20%20%20compose%3A%20compose%2C%0A%20%20%20%20%20%20cross%3A%20cross%2C%0A%20%20%20%20%20%20decompose%3A%20decompose%2C%0A%20%20%20%20%20%20dot%3A%20dot%2C%0A%20%20%20%20%20%20identity%3A%20identity%2C%0A%20%20%20%20%20%20transpose%3A%20transpose%2C%0A%20%20%20%20%20%20length%3A%20length%2C%0A%20%20%20%20%20%20lengthSq%3A%20lengthSq%2C%0A%20%20%20%20%20%20orthographic%3A%20orthographic%2C%0A%20%20%20%20%20%20frustum%3A%20frustum%2C%0A%20%20%20%20%20%20perspective%3A%20perspective%2C%0A%20%20%20%20%20%20translation%3A%20translation%2C%0A%20%20%20%20%20%20translate%3A%20translate%2C%0A%20%20%20%20%20%20xRotation%3A%20xRotation%2C%0A%20%20%20%20%20%20yRotation%3A%20yRotation%2C%0A%20%20%20%20%20%20zRotation%3A%20zRotation%2C%0A%20%20%20%20%20%20xRotate%3A%20xRotate%2C%0A%20%20%20%20%20%20yRotate%3A%20yRotate%2C%0A%20%20%20%20%20%20zRotate%3A%20zRotate%2C%0A%20%20%20%20%20%20axisRotation%3A%20axisRotation%2C%0A%20%20%20%20%20%20axisRotate%3A%20axisRotate%2C%0A%20%20%20%20%20%20scaling%3A%20scaling%2C%0A%20%20%20%20%20%20scale%3A%20scale%2C%0A%20%20%20%20%20%20multiply%3A%20multiply%2C%0A%20%20%20%20%20%20inverse%3A%20inverse%2C%0A%20%20%20%20%20%20transformVector%3A%20transformVector%2C%0A%20%20%20%20%20%20transformPoint%3A%20transformPoint%2C%0A%20%20%20%20%20%20transformDirection%3A%20transformDirection%2C%0A%20%20%20%20%20%20transformNormal%3A%20transformNormal%2C%0A%20%20%20%20%20%20setDefaultType%3A%20setDefaultType%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%0A%20%20const%20textures%20%3D%20%7B%7D%3B%0A%0A%20%20var%20vertexShaderCode%20%3D%20%5B%0A%20%20%20%20%22attribute%20vec4%20a_position%3B%22%2C%0A%20%20%20%20%22attribute%20vec2%20a_texcoord%3B%22%2C%0A%20%20%20%20%22attribute%20float%20a_zOffset%3B%22%2C%0A%20%20%20%20%22attribute%20vec4%20aVertexColor%3B%22%2C%0A%20%20%20%20%22%22%2C%0A%20%20%20%20%22uniform%20mat4%20u_matrix%3B%22%2C%0A%20%20%20%20%22%22%2C%0A%20%20%20%20%22varying%20vec2%20v_texcoord%3B%22%2C%0A%20%20%20%20%22varying%20vec4%20vColor%3B%22%2C%0A%20%20%20%20%22%22%2C%0A%20%20%20%20%22void%20main()%20%7B%22%2C%0A%20%20%20%20%22gl_Position%20%3D%20u_matrix%20*%20(a_position%20*%20a_zOffset%20*%20float(128))%20%2B%20vec4(0%2C0%2C1%2Ca_zOffset)%3B%22%2C%0A%20%20%20%20%22v_texcoord%20%3D%20a_texcoord%3B%22%2C%0A%20%20%20%20%22vColor%20%3D%20aVertexColor%3B%22%2C%0A%20%20%20%20%22%7D%22%2C%0A%20%20%5D.join(%22%5Cn%22)%3B%0A%0A%20%20var%20fragmentShaderCode%20%3D%20%5B%0A%20%20%20%20%22precision%20mediump%20float%3B%22%2C%0A%20%20%20%20%22%22%2C%0A%20%20%20%20%22varying%20vec2%20v_texcoord%3B%22%2C%0A%20%20%20%20%22varying%20vec4%20vColor%3B%22%2C%0A%20%20%20%20%22%22%2C%0A%20%20%20%20%22uniform%20sampler2D%20u_texture%3B%22%2C%0A%20%20%20%20%22%22%2C%0A%20%20%20%20%22void%20main()%20%7B%22%2C%0A%20%20%20%20%22gl_FragColor%20%3D%20texture2D(u_texture%2C%20v_texcoord)%20*%20vColor%3B%22%2C%0A%20%20%20%20%22%7D%22%2C%0A%20%20%5D.join(%22%5Cn%22)%3B%0A%0A%20%20var%20quadPositions%20%3D%20%5B0%2C%200%2C%200%2C%201%2C%201%2C%200%2C%201%2C%200%2C%200%2C%201%2C%201%2C%201%5D%3B%0A%0A%20%20var%20quadCoords%20%3D%20%5B0%2C%200%2C%200%2C%201%2C%201%2C%200%2C%201%2C%200%2C%200%2C%201%2C%201%2C%201%5D%3B%0A%0A%20%20var%20quadZPositionArray%20%3D%20%5B1%2C%201%2C%201%2C%201%2C%201%2C%201%5D%3B%0A%0A%20%20var%20quadColors%20%3D%20%5B%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%5D%3B%0A%0A%20%20var%20TriangleZPositionArray%20%3D%20%5B1%2C%201%2C%201%5D%3B%0A%0A%20%20var%20triangleColors%20%3D%20%5B%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%5D%3B%0A%20%20var%20quadPositionBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadPositionBuffer)%3B%0A%20%20gl.bufferData(%0A%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20new%20Float32Array(quadPositions)%2C%0A%20%20%20%20gl.STATIC_DRAW%0A%20%20)%3B%0A%0A%20%20var%20quadZPositionBuffer%20%3D%20gl.createBuffer()%3B%0A%0A%20%20var%20quadTexCoordBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadTexCoordBuffer)%3B%0A%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(quadCoords)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20var%20quadColorBuffer%20%3D%20gl.createBuffer()%3B%0A%0A%20%20var%20triPosBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20var%20triUVBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20var%20tricolorBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20var%20triZBuffer%20%3D%20gl.createBuffer()%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20code%0A%20%20%20*%20%40param%20%7Bnumber%7D%20type%0A%20%20%20*%20%40returns%20%7BWebGLShader%7D%0A%20%20%20*%2F%0A%20%20const%20compileShader%20%3D%20(code%2C%20type)%20%3D%3E%20%7B%0A%20%20%20%20const%20shader%20%3D%20gl.createShader(type)%3B%0A%20%20%20%20gl.shaderSource(shader%2C%20code)%3B%0A%20%20%20%20gl.compileShader(shader)%3B%0A%20%20%20%20if%20(!gl.getShaderParameter(shader%2C%20gl.COMPILE_STATUS))%20%7B%0A%20%20%20%20%20%20console.error(gl.getShaderInfoLog(shader))%3B%0A%20%20%20%20%20%20throw%20new%20Error(%22Error%20compiling%20shader%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20shader%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BWebGLShader%7D%20vertexShader%0A%20%20%20*%20%40param%20%7BWebGLShader%7D%20fragmentShader%0A%20%20%20*%20%40returns%20%7BWebGLProgram%7D%0A%20%20%20*%2F%0A%20%20const%20createProgram%20%3D%20(vertexShader%2C%20fragmentShader)%20%3D%3E%20%7B%0A%20%20%20%20const%20program%20%3D%20gl.createProgram()%3B%0A%20%20%20%20gl.attachShader(program%2C%20vertexShader)%3B%0A%20%20%20%20gl.attachShader(program%2C%20fragmentShader)%3B%0A%20%20%20%20gl.linkProgram(program)%3B%0A%20%20%20%20if%20(!gl.getProgramParameter(program%2C%20gl.LINK_STATUS))%20%7B%0A%20%20%20%20%20%20console.error(gl.getProgramInfoLog(program))%3B%0A%20%20%20%20%20%20throw%20new%20Error(%22Error%20linking%20program%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20gl.validateProgram(program)%3B%0A%20%20%20%20if%20(!gl.getProgramParameter(program%2C%20gl.VALIDATE_STATUS))%20%7B%0A%20%20%20%20%20%20console.error(gl.getProgramInfoLog(program))%3B%0A%20%20%20%20%20%20throw%20new%20Error(%22Error%20validating%20program%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20program%3B%0A%20%20%7D%3B%0A%0A%20%20const%20vertexShader%20%3D%20compileShader(vertexShaderCode%2C%20gl.VERTEX_SHADER)%3B%0A%20%20const%20fragmentShader%20%3D%20compileShader(fragmentShaderCode%2C%20gl.FRAGMENT_SHADER)%3B%0A%20%20const%20program%20%3D%20createProgram(vertexShader%2C%20fragmentShader)%3B%0A%0A%20%20%2F%2F%20look%20up%20where%20the%20vertex%20data%20needs%20to%20go.%0A%20%20const%20positionLocation%20%3D%20gl.getAttribLocation(program%2C%20%22a_position%22)%3B%0A%20%20const%20texcoordLocation%20%3D%20gl.getAttribLocation(program%2C%20%22a_texcoord%22)%3B%0A%20%20const%20zLocation%20%3D%20gl.getAttribLocation(program%2C%20%22a_zOffset%22)%3B%0A%20%20const%20colorLocation%20%3D%20gl.getAttribLocation(program%2C%20%22aVertexColor%22)%3B%0A%0A%20%20%2F%2F%20lookup%20uniforms%0A%20%20const%20matrixLocation%20%3D%20gl.getUniformLocation(program%2C%20%22u_matrix%22)%3B%0A%20%20const%20textureLocation%20%3D%20gl.getUniformLocation(program%2C%20%22u_texture%22)%3B%0A%0A%20%20%2F%2Fcool%20drawing%20functions%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20deg%0A%20%20%20*%20%40returns%20%7Bnumber%7D%0A%20%20%20*%2F%0A%20%20function%20degreesToRadians(deg)%20%7B%0A%20%20%20%20return%20deg%20*%200.0174533%3B%0A%20%20%7D%0A%0A%20%20function%20loadImageAndCreateTextureInfo(url%2C%20clamp)%20%7B%0A%20%20%20%20const%20texture%20%3D%20gl.createTexture()%3B%0A%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20texture)%3B%0A%20%20%20%20%2F%2F%20Fill%20the%20texture%20with%20a%201x1%20blue%20pixel.%0A%20%20%20%20gl.texImage2D(%0A%20%20%20%20%20%20gl.TEXTURE_2D%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20gl.RGBA%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20gl.RGBA%2C%0A%20%20%20%20%20%20gl.UNSIGNED_BYTE%2C%0A%20%20%20%20%20%20new%20Uint8Array(%5B0%2C%200%2C%20255%2C%20255%5D)%0A%20%20%20%20)%3B%0A%0A%20%20%20%20%2F%2F%20Let's%20assume%20all%20images%20are%20not%20a%20power%20of%202%0A%20%20%20%20if%20(clamp)%20%7B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20gl.REPEAT)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20gl.REPEAT)%3B%0A%20%20%20%20%7D%0A%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MIN_FILTER%2C%20gl.NEAREST)%3B%0A%0A%20%20%20%20const%20textureInfo%20%3D%20%7B%0A%20%20%20%20%20%20%2F%2F%20we%20don't%20know%20the%20size%20until%20it%20loads%0A%20%20%20%20%20%20width%3A%201%2C%0A%20%20%20%20%20%20height%3A%201%2C%0A%20%20%20%20%20%20texture%2C%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20Scratch.canFetch(url).then((allowed)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!allowed)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Permission%20is%20checked%20earlier.%0A%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%20no-restricted-syntax%0A%20%20%20%20%20%20const%20image%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20image.onload%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20textureInfo.width%20%3D%20image.width%3B%0A%20%20%20%20%20%20%20%20textureInfo.height%20%3D%20image.height%3B%0A%0A%20%20%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20textureInfo.texture)%3B%0A%20%20%20%20%20%20%20%20gl.texImage2D(%0A%20%20%20%20%20%20%20%20%20%20gl.TEXTURE_2D%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20gl.RGBA%2C%0A%20%20%20%20%20%20%20%20%20%20gl.RGBA%2C%0A%20%20%20%20%20%20%20%20%20%20gl.UNSIGNED_BYTE%2C%0A%20%20%20%20%20%20%20%20%20%20image%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20image.crossOrigin%20%3D%20%22anonymous%22%3B%0A%20%20%20%20%20%20image.src%20%3D%20url%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20return%20textureInfo%3B%0A%20%20%7D%0A%0A%20%20function%20drawImage(tex%2C%20texWidth%2C%20texHeight%2C%20dstX%2C%20dstY%2C%20stampRotation)%20%7B%0A%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20tex)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20WebGL%20to%20use%20our%20shader%20program%20pair%0A%20%20%20%20gl.useProgram(program)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadZPositionBuffer)%3B%0A%20%20%20%20gl.bufferData(%0A%20%20%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20%20%20new%20Float32Array(quadZPositionArray)%2C%0A%20%20%20%20%20%20gl.STATIC_DRAW%0A%20%20%20%20)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadColorBuffer)%3B%0A%20%20%20%20gl.bufferData(%0A%20%20%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20%20%20new%20Float32Array(quadColors)%2C%0A%20%20%20%20%20%20gl.STATIC_DRAW%0A%20%20%20%20)%3B%0A%20%20%20%20%2F%2F%20Setup%20the%20attributes%20to%20pull%20data%20from%20our%20buffers%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadPositionBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(positionLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(positionLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadZPositionBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(zLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(zLocation%2C%201%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadTexCoordBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(texcoordLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(texcoordLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadColorBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(colorLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(colorLocation%2C%204%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20convert%20from%20pixels%20to%20clip%20space%0A%20%20%20%20var%20matrix%20%3D%20m4.orthographic(%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20gl.canvas.width%2C%0A%20%20%20%20%20%20gl.canvas.height%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20-1%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%20%20if%20(coordinateSpace%20%3D%3D%20%22Canvas%22)%20%7B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20dstX%2C%20dstY%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(%0A%20%20%20%20%20%20%20%20matrix%2C%0A%20%20%20%20%20%20%20%20(runtime.stageWidth%20%2F%202)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(runtime.stageHeight%20%2F%202)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%200%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20dstX%2C%20-dstY%2C%200)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20translate%20our%20quad%20to%20dstX%2C%20dstY%0A%0A%20%20%20%20matrix%20%3D%20m4.zRotate(matrix%2C%20degreesToRadians(stampRotation))%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20scale%20our%201%20unit%20quad%0A%20%20%20%20%2F%2F%20from%201%20unit%20to%20texWidth%2C%20texHeight%20units%0A%20%20%20%20matrix%20%3D%20m4.scale(matrix%2C%20texWidth%2C%20texHeight%2C%201)%3B%0A%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20stampOffset%5B0%5D%2C%20stampOffset%5B1%5D%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20Set%20the%20matrix.%0A%20%20%20%20gl.uniformMatrix4fv(matrixLocation%2C%20false%2C%20matrix)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20the%20shader%20to%20get%20the%20texture%20from%20texture%20unit%200%0A%20%20%20%20gl.uniform1i(textureLocation%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20draw%20the%20quad%20(2%20triangles%2C%206%20vertices)%0A%20%20%20%20gl.drawArrays(gl.TRIANGLES%2C%200%2C%206)%3B%0A%20%20%7D%0A%0A%20%20function%20drawTexturedTri(tex%2C%20trianglePoints%2C%20triangleUvs)%20%7B%0A%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20tex)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triPosBuffer)%3B%0A%20%20%20%20gl.bufferData(%0A%20%20%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20%20%20new%20Float32Array(trianglePoints)%2C%0A%20%20%20%20%20%20gl.STATIC_DRAW%0A%20%20%20%20)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triUVBuffer)%3B%0A%20%20%20%20gl.bufferData(%0A%20%20%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20%20%20new%20Float32Array(triangleUvs)%2C%0A%20%20%20%20%20%20gl.STATIC_DRAW%0A%20%20%20%20)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triZBuffer)%3B%0A%20%20%20%20gl.bufferData(%0A%20%20%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20%20%20new%20Float32Array(TriangleZPositionArray)%2C%0A%20%20%20%20%20%20gl.STATIC_DRAW%0A%20%20%20%20)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20tricolorBuffer)%3B%0A%20%20%20%20gl.bufferData(%0A%20%20%20%20%20%20gl.ARRAY_BUFFER%2C%0A%20%20%20%20%20%20new%20Float32Array(triangleColors)%2C%0A%20%20%20%20%20%20gl.STATIC_DRAW%0A%20%20%20%20)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20WebGL%20to%20use%20our%20shader%20program%20pair%0A%20%20%20%20gl.useProgram(program)%3B%0A%0A%20%20%20%20%2F%2F%20Setup%20the%20attributes%20to%20pull%20data%20from%20our%20buffers%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triPosBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(positionLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(positionLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triUVBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(texcoordLocation)%3B%20%2F%2F%0A%20%20%20%20gl.vertexAttribPointer(texcoordLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triZBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(zLocation)%3B%20%2F%2F%0A%20%20%20%20gl.vertexAttribPointer(zLocation%2C%201%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20tricolorBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(colorLocation)%3B%20%2F%2F%0A%20%20%20%20gl.vertexAttribPointer(colorLocation%2C%204%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20convert%20from%20pixels%20to%20clip%20space%0A%20%20%20%20var%20matrix%20%3D%20m4.orthographic(%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20gl.canvas.width%2C%0A%20%20%20%20%20%20gl.canvas.height%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20-1%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20translate%20our%20quad%20to%20dstX%2C%20dstY%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20scale%20our%201%20unit%20quad%0A%20%20%20%20%2F%2F%20from%201%20unit%20to%20texWidth%2C%20texHeight%20units%0A%0A%20%20%20%20if%20(coordinateSpace%20%3D%3D%20%22Scratch%22)%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(%0A%20%20%20%20%20%20%20%20matrix%2C%0A%20%20%20%20%20%20%20%20(runtime.stageWidth%20%2F%202)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(runtime.stageHeight%20%2F%202)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%200%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Set%20the%20matrix.%0A%20%20%20%20gl.uniformMatrix4fv(matrixLocation%2C%20false%2C%20matrix)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20the%20shader%20to%20get%20the%20texture%20from%20texture%20unit%200%0A%20%20%20%20gl.uniform1i(textureLocation%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20draw%20the%20quad%20(2%20triangles%2C%206%20vertices)%0A%20%20%20%20gl.drawArrays(gl.TRIANGLES%2C%200%2C%203)%3B%0A%20%20%7D%0A%0A%20%20function%20hexToRgb(hex)%20%7B%0A%20%20%20%20if%20(typeof%20hex%20%3D%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20const%20splitHex%20%3D%20%2F%5E%23%3F(%5Ba-f%5Cd%5D%7B2%7D)(%5Ba-f%5Cd%5D%7B2%7D)(%5Ba-f%5Cd%5D%7B2%7D)%24%2Fi.exec(hex)%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20r%3A%20parseInt(splitHex%5B1%5D%2C%2016)%2C%0A%20%20%20%20%20%20%20%20g%3A%20parseInt(splitHex%5B2%5D%2C%2016)%2C%0A%20%20%20%20%20%20%20%20b%3A%20parseInt(splitHex%5B3%5D%2C%2016)%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20r%3A%20Math.floor(hex%20%2F%2065536)%2C%0A%20%20%20%20%20%20g%3A%20Math.floor(hex%20%2F%20256)%20%25%20256%2C%0A%20%20%20%20%20%20b%3A%20hex%20%25%20256%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20function%20getspritecostume(util%2C%20c)%20%7B%0A%20%20%20%20let%20target%20%3D%20util.target%3B%0A%20%20%20%20let%20dataURI%20%3D%20target.sprite.costumes%5Bc%20-%201%5D.asset.encodeDataURI()%3B%0A%20%20%20%20return%20dataURI%3B%0A%20%20%7D%0A%0A%20%20async%20function%20coolcash(uri%2C%20clamp)%20%7B%0A%20%20%20%20if%20(!textures.hasOwnProperty(uri))%20%7B%0A%20%20%20%20%20%20textures%5Buri%5D%20%3D%20await%20loadImageAndCreateTextureInfo(uri%2C%20clamp)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2FSplit%20Blocks%20Function%0A%20%20function%20splitBlockCatagories(Catagories)%20%7B%0A%20%20%20%20let%20returnedArray%20%3D%20%5B%5D%3B%0A%20%20%20%20Catagories.forEach((Catagory)%20%3D%3E%20%7B%0A%20%20%20%20%20%20Catagory.blocks.forEach((Block)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!Block.blockIconURI%20%26%26%20Catagory.icon)%20%7B%0A%20%20%20%20%20%20%20%20%20%20Block.blockIconURI%20%3D%20Catagory.icon%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20returnedArray.push(Block)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20returnedArray.push(%22---%22)%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20return%20returnedArray%3B%0A%20%20%7D%0A%0A%20%20const%20BlankIcon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAFoAAABZCAYAAAC%2BPDOsAAAAAXNSR0IArs4c6QAAAihJREFUeF7t3VtuwyAQBdB4Cd1S19XPrqtb6hJakcQOJtjmMQPzuPwgJGuAoyt%2BLMFye7S%2FZ792SzLGsFMggKbIcUmAdwLHyd2gP36%2Bb7%2BfX2lpYBNgb4kOyGsDNoFs5iy%2BJzqGDmNg02JnE41k0yKHaqfQSDYd%2BCU0sGmwi6CB3Y9dDA3sPuwqaGC3Y1dDA7sNuwka2PXYzdDArsPuggZ2OXY3NLDLsEmggX2NTQYN7HNsUmhgH2OTQwM7j80CDex3bDZoYO%2BxWaGB%2FcJmhwb2A3sINLAHQnvHHpbo9bTy%2Bnd9OLTXZE%2BB9og9Ddob9lRoT9jTob1gi4D2gC0G2jq2KGjL2OKgrWKLhLaILRbaGrZoaEvY4qGtYKuAtoCtBlo7tipozdjqoLViq4TWiK0WWhu2amhN2OqhtWCbgNaAbQZaOrYpaMnY5qClYpuElohtFloatmloSdjmoaVgu4CWgO0Geja2K%2BiZ2O6gZ2G7hJ6B7RZ6NLZr6JHY7qFHYQM6SA%2B4ixXQT2hubEBH0JzYgE6gubABnYHmwAb0ATQ1NqBPoCmxAX0BTYUN6AJoCmxAF0L3YgO6AroHG9CV0K3YgG6AbsEGdCN0LTagO6BrsAHdCV2KDWgC6BJsQBNBX2EDmhD6DBvQxNBH2Bt0%2BCB905BhDW5KJjdWLgE6tN1zqG40mDcaY79BM8%2FttvwKvUu1Ww2%2BjW9HR26Ks2es%2BZZko3Ic4PuO%2FgGXQ1VnDpD%2BgwAAAABJRU5ErkJggg%3D%3D%22%3B%0A%20%20const%20CoordsIcon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGIAAABgCAYAAADmbacFAAAAAXNSR0IArs4c6QAAA2xJREFUeF7tncFxwyAQRe0S0pKLSDWZHDKpJkWkpZSQDJKxkAwsYtfMRn65OaBl%2BU8fMLLx%2BbT%2B%2B72%2BPG%2F%2BX3oZ64fy3DVSeWMzx68WxUsFi72WYEjXSOXHV3dHD4PYk2Av35%2B3y34ubxKMWeSP16Wp96%2F0Gql8R4rPUXUCkUKI3b7CKLnidwUhXrTAWENal0tOew7lN72UQJTH%2FtQNadAII1c%2BlwEic6v1g9gOTeldX4cEiCEgSgPLeg55yuGn1uleR4SY9xNyrSWGperNNwYEbhBHAA2INlcAQYQQVzC15WvLKie%2FlL1f0jJJV5BoHSG7grlhiCPkCZuhyQmIkAauEGFohibZDcwTIoBYYQwIXCEC6QXR7gZcIULQLF%2FLS9YwH7DX1CR%2BWqnfEey%2B7hb7EXtNPI8wxTA%2FG%2Bh5Zy09gZPKjbvx%2F8P1gljeUa81SLcxeGa94%2F7QgIjNBMFr%2B0hS%2BY50j1vVAsRx1RnYM0AMFPsRqyYn6R8nDRzhhCUgAOFEASdp4AhAOFHASRo4AhBOFHCSBo4AhBMFnKSBIwDhRAEnaeAIQDhRwEkaOAIQThRwkgaOAIQTBZykgSMA4UQBJ2ngCEA4UcBJGjgCEE4UcJIGjgCEEwWcpIEjAOFEASdp4AhAOFHASRo4AhBOFHCSBo4AhBMF7NJoPfU5Ww9H2IDIfYM2RN5%2BybP4TVtA6EHkzyW5Pxqp%2Bt1zQFiAKB82HF1RPkTmCgwQjwIR4kpHdC91zoCwABFi1F0hntgDiEeCiHe8dJLP6YQj9BymCOqDxHCEEYkJRunOz7WxOf0TEJYgSnPFto3MEayAsAPRPkQBwlb1TDR5rigcSIwj7NnUYRQOIwbESBCV47kBYQuiyw23fZDKr27ldhBtUz9WtPp5uHNftzuyt3%2F2nHJ5LPlsetPtBhxhAyBG6XYDIOxAqNwACEsQDRt7teZYNelhSA99mhY8gLAAoXQDQ5Mewry%2FJD8qFVvCEaJEYoXahweahiUcIWrcXGGBkT6n3vFLxTiiWWux4vYzS9l30KUogBD1HVMBEGN0FlsBhCjRmAqAGKOz2EoLCDEIFVQKTJN6EYQqNBc3KfBzeYv1yh8wa4pEJbUCEQaOUEupDxBgAEKvozoCINQS6gOshiZ9OCIoFZgna2UQLu9X4LYf9Qeqxh17SNwkIgAAAABJRU5ErkJggg%3D%3D%22%3B%0A%20%20const%20SpriteIcon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGAAAABeCAYAAADc6BHlAAAAAXNSR0IArs4c6QAABItJREFUeF7tncuN2zAQhu0SctmCAuSQDnLZAlLCAjkG2BJSwF62gxwWSEG5pIQEFJYKRQ5f8%2BBzfLSoMfV%2F8yIl2%2Fdb%2BPrrvXUHxti3%2FLGJobeUndR5Sx9zRUmJWTquVCyF8a4UKOzj89Pt5em5VMxj3Idf34Pxfz5%2By9nYHoQV4PR%2BI777ioGABM%2BpHQGyNYRqABjhfTAAiG0hRAH4ns8hvIIIc0RRcZUQ307Fi4btIiELQFJ8hXALevNLK9pC%2FN0h%2BCF%2FAmgp%2Fs4QFECudxY%2BDtaAHt6%2FaxQoAGEPz5kP1gE9vR%2BIguXb0tEBGCZLQ7gAGMH7jeI7Lc6GBOBB0AjIFRKJ404UKAAJgXM2dwLQdfUbA7ETAKPBAWGUIgwUYpfTUilpmCJccPsyFixTA%2BkOgCC8D2RKEN0AQMI%2F%2Fn7L1ebz%2BMvDpyUiostK2Be%2FRnhIdQDGNNHQFAC38C6MSEQMDyLYDZXqhCTFT4CYD4BUO%2BoCoKacXKHwomFoCOAdMe4oaCm%2BhTMLBPFbkj3EnwkCFJ5sWxM9xTcQZoiCWH5kgdAbwAwQsgAoRdkCkC66FUV5uIKcmhDpIa0RvH%2BGWpDzCDSEUbx%2F9DSUA3BuVbthnmtTR%2FJ%2BIApKrjmX1diO10wG%2FApT7psxvfP%2FSgDstdR8Me82IABzHTWOx%2BbtkCHKRIpAKIA0PwoAyHIARQG0BXBJU6OIP3InxB0BQZ3oDSFx54w7JaNqxZIAKkXvemtzKQAp4b%2F8%2FBH10NfPX1PeK6XR8ZmSxo%2BC3CoFQeKnRI8pHoEhppOYYfuwlzQAX3iM6BAMAISIViJG3y%2Fo%2F88fVDxuUlPJpMR35yANYloALcS3IDwIrJqxGgO8VywKXABcaScVfVIQpgTQWnzJSJAGYObOGgW9xJeC0AIAKwQLoEXaKeiOyPqRDRR2LZdNOmxr2tv7JaKgFYBLFGAXaL29f3YAJAijeD8AgeTEpJML048%2FDHXPYGAApC2dHgCCLWv7Rqo2jJJ%2BuNNQTwBBSoIiykJRAMh8U3ha0f1lY6tX%2B5lpSdGOjD6xUFjMsCQMBYCRlH7OCUUB0MXEWFAAGNWYzzkgaAQwq1phbigAXNvTIxbhGJNmAFxxYxG3LQDJNBR7OgKCoAAqclfJ0MyjKUHtccaTsgjp5JILYx4jloasoKn%2FT7CRwOX9pE0kZmFLzYm0o66gPgAzMfen%2FA2EnQGc%2B0ec7WgOgA%2FB8RZyBiEbKHVdxnFdoiACgawf2QCjsDWm2CH4RRhKRQAEsn5kAzWqMY69bNhxpaMeEGYFcNYCC3VWCDMDWALC7ACmh7ACAJuFWOpCakUsUZhXAhBEQ019yG1FWFvcEFYDAEYDsvtytbk%2B2ef93aO17%2F35XZG2RYOQFzDCacU3%2BwtWtyIQVgcQcwIjJuba2SFgJjGCZ%2FecAysEBYBDyQZBAeAABB0XtjtSAHgALBAUAA0AGYICoAMgQVAAPADQEBQAHwAMhLsC4AVQBMHdslAA%2FACyEBwAGgEy%2Bh9WwcWav2GnESBIwIcAfJRGgKz%2BYST4u67%2FAPKrBHxjStmdAAAAAElFTkSuQmCC%22%3B%0A%20%20const%20ColorIcon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAF4AAABeCAYAAACq0qNuAAAAAXNSR0IArs4c6QAABTFJREFUeF7t3b2KFEEUBeAecBVkk8nERBSMBEGMTDcxN%2FIhfATDRdinMDSaV5gn8REEo40MlBqoobrmVtWtqvtzWnYzd3tmer46ffrOr7tlOz9%2Fmbu6Y27nuhniTnKBe%2BGg7ivKzmhhlxbH%2FX577UAT%2BsmnD81EP3r9vLnN%2Fd2huc2yLOYO1jdYBOdA54Ic%2BPwyjYUw87C6IRJ8BDuFHIFPL19ZBHUX9RtYluUCfRY84s3Cx%2BspLICqjeaVq4FLw3ssgAa8OrgWvOUCSMOv0KUqpTSWSFVN6fqJChLzEruivMu10QOWNny4DS18CXjTlEtONZwBv1I%2FU3ZTF%2FZIuRe8dPpn4N2Srn1yrR0JUtUzCu%2BObtXx1CJI4I%2FAQ6B7wkvUTi88DLo3%2FCz%2BMLzFuNiaOizGydY%2BZLXD9mRvmE4wCOgIiS%2BMmixT1kaI6EjwRO00XZsboKKjwffiP8C3Srzj7z1934I%2FTzEove75yJWzBlx8FjwiOmLVECfbom8N%2Fpz26xfPlj%2FvX3IW3HQbhHGS8ciWNC7Br9DTK0daAET4xx%2Ffnbh%2B33xN2S6cu%2BHDtaHgI8FH8Kg9Al9Me35YeS8AAnwOnhrV8KnEs%2BHjjXgtgCf8%2Fd1htz%2FeVt%2BY1QPfje6J7wVfS3neCiX8PPHD8B4LYA3fA97qehI%2BjI%2BzPxb1YwU%2FAl7o%2BrO3GrzF9GMBP4uejZYk%2FHTNlI4SrfRrwkuA1%2BomTfwJXqJmrBZAA14SvFY3pvDS9SMJrwVOpP5kHuHVakYz%2FVLw2ujUUwhu8BLj5yy8BXip51fwmv3eGk9HTsCj8JbgpZ6HgR%2Fp%2F154L3Cq56Hge%2BunB94bPZ%2FnIeG5C8CBRwAvJd58omn1ffr3WvfX4JHAqRNsSDw0fC39FDwi%2BKbhqQXI4ZHR81l%2BM4mn6ifCo4P%2FF4lPF%2BDq%2B5ee04X7tumLIptMfBC8un663Pz4dsI8%2FvrpjsrZgU3DB%2FD4E%2BHjv9EXYJPwKXgJHj39m4On0ANynvj0cEdM%2F2bgS%2BC1xOddi7QAOXzYV%2FVXnzgnn9XEknR56bK1xCOmP4HfwT1X00p5CsqFRzn5QsL3gPdUDXW0eNUPHPwIeuvk2qo2D%2FwifNhZy1ehRsFnE%2B%2FR%2F%2Flb%2BVxec50Fl4S36v8SvNlkI4U%2BWzXW3Z%2FWTLhts%2FfVSIJrJF67fprw0j2vAa4NL10%2F1Fu1Vd%2B0qomuUTVa9ZOnPa8asZ7XBrdKvFT9sOFH68YK3AN%2BtH7UPxFijW5VNbP1w4U%2F1w039R7gnonvqZ%2BeD5%2Bx4T3BUeBb9dML38RHQPesGqp%2Bwu%2FS539S9P3xNnzSezVBdn2yGwUcLfFU%2FYx8sjtez%2BodZmjoiImPcIe3n89rQaWdmuPzo%2BiEv3%2FzqnR0uf6%2B94UQq51N4E%2Bf%2Fs5rhg2Pio8In6a99n%2BPtL4oaHWiRUs%2BGjwXnZP4B%2FiOfpKGh8VHSnwPOjfxF1MOSuWgwPei98LDJR8BfgR9Ch5h0vGGz9C7PDlTDTnbx1961o4n%2FAx61wpl%2BquvhPLC94KfRZ%2BBX%2FW9V%2B14wEugz8K741vDS6FLwLviW8JLokvBX8z5VtVjAS8NHrFGpprag2jTk642vBa6dOLJ5GumXwueABe3kk58ejRcfAup9NgpDW8BrlU1VA2pLYAUvCW4JfzF5CP1qHcWvgAuXitUGjWrhpX%2BmUUYga9gm4BbJ776fA%2B1QpzzAQe%2BAe3mYJ340iha%2FTrw2vw6%2BDf3%2B%2B2%2BAwSc1iJA3VeonWmkl7sgm7hP%2FwDwgcxktVR5CQAAAABJRU5ErkJggg%3D%3D%22%3B%0A%20%20const%20LineStyleIcon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAAAXNSR0IArs4c6QAAAkxJREFUeF7t2m1OBCEMBmDnCF7Jc%2FnTc3klj7CG0TFIgLbsQD9498cmm2kUn22BgscLXpTAowg40ufzDa%2BmQIl2BR6Aa2fNifb6%2BfEv4uvt%2FfwMuDpcFS2FAk6YaVc44ISZBrjBTMvLNE1xmON%2BIJtzWplp17oAuAE0rKqDaLvDicsznx53LdWn0HbNuKfRAFfZmlwbXKqr2rFUyXaKQkPGZRnHzbS%2F45FNj5Sax0Vcj%2BilWj2E%2FMXpPSP9IsM9nVU9vahw3UNIzuRPpVxEuFtWzd3guptb6cq5S6ne0hFQmRZtO7IULcoGeDlaBDgVNO9wamie4VTRvMKpo3mEM4HmDc4Mmic4U2he4MyhuYEr%2F9Uqb4vu7D%2B57ZZ7OC0013CaaG7g0kDzctVG8wKXxlk7Blc9hFX95cVkzMFJMSbGbGIQeUalkrRQitQKawFu%2BsUKhTDyXBuOc0egPcaqq%2BagOGhmFzAtOJNtlKRkNeDco2mUQQi01XBh0FbChUJbBRcObQVcSLTZcGHRZsKFRpsFFx5tBtwWaFPgLF6sSFopbuzdLdejBefhjI2LtizjoqFNgbN4sSLJJG7s3aVq8mKFiyGJG4UrL1ZGf45krKZiR%2F7g2m3UjLI3BVUORgrn8mJlxjcggWtubiOumhQ2F871xQqFMPKcA7dNGyUBpOCA1tDswQGtk4ItOKARdVuDAxpjsivhgMZAK3f7QGOi5XBAE6BdcEATorHgdmynOI5pcUAPypEqYppwyLS%2B5rUdwRmbMOvyfdz2p7oSu299qhZaTMEypAAAAABJRU5ErkJggg%3D%3D%22%3B%0A%0A%20%20%2F%2FBlock%20Catagories%20in%20pen%2B%20version%205.0%0A%20%20const%20UtilityBlocks%20%3D%20%7B%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20SpriteIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22precachetextures%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Start%20loading%20image%20from%20url%3A%20%5Buri%5D%20clamp%20the%20texture%3F%20%5Bclamp%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20uri%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20EXAMPLE_IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20clamp%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22TFmenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20SpriteIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getcostumedata%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Get%20data%20uri%20of%20costume%5Bcostu%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20costu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20spr%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20BlankIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22SolidColorRet%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Solid%20Color%22%2C%0A%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20ColorIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22rgbtoSColor%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Convert%20R%5BR%5D%20G%5BG%5D%20B%5BB%5D%20to%20Hex%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20R%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22255%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20G%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22255%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22255%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20ColorIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22hsvtoSColor%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Convert%20Hue%5BH%5D%20Saturation%5BS%5D%20Value%5BV%5D%20to%20Hex%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20H%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20S%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20V%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20CoordsIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setCoordSpace%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20the%20coordinate%20space%20to%20%5Bspace%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20space%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22coordTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20CoordsIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22coordBlock%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22%5Bc1%5D%5Bc2%5D%5Bc3%5D%5Bc4%5D%5Bc5%5D%5Bc6%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20c1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c4%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c5%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c6%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%7D%3B%0A%0A%20%20const%20StampBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGIAAABYCAYAAAAORCLFAAAAAXNSR0IArs4c6QAAArZJREFUeF7tnDFSwzAQRe2SgoIr0XCTlJyAkhNQ5iY0XImCghLGmcijmBjLWe3qJ35UDCPtrv7T1yrG0HfxXz%2FxKVdn7FfPME6ITngNEHJJw%2FQJS9R13QmEu92TcQ%2F5TP%2Fev28HhCqERKAFjHBHqEMYYNwyiPFYugYQExghmzUkSd4fAHG%2BtwFipudnx1OIRiFJcMTyDQ8QOGJ5l7QcwdHUUv0sNyAA4aoAnyMW5KVZ06xdHWgOTo8wS1gnACDq6GiOAgizhHUCAKKOjuYogDBLWCcAIOroaI4CCLOEdQIAoo6O5ig3D8KsUHyAkKcPIUmmr9LEa2nKGKJRSJIVMhweDt6%2F7f6d8vW8XxFydqjU2qWKSc5ZAnEphQlAqbVLFQOIS7dY%2FXlFR5MlbeYKqU0oVYy3IwaAgCjbxjiiTCf3UYBwl7gsASDKdHIfBQh3icsSAKJMJ%2FdRkSCGxcjcGmUKOSIGhPteL0sAiDKdXEeNbwN6PWuafKDjaJrBCQjXfV4ePASE6mMOpWYNiPJN6zoSEK7ylgcHRLlWriPdr66pesXf1Mn1CM%2BrKyDKjIQjynRyHxUGQvEKq3I0hTXqM8eThAYSReQvoEX0CBwxf7qFHkuKz5zmHNHkX75FuWHm9uTeBI8Jzmqe%2F7CJ%2BPnqNwIiX%2FKof%2FqmKYRoALkSld6jtbqpH0CcQGgpinU11zR%2F%2Bun%2BBAQQYlHmMEYQQIiFML0wAKKN%2FmPW5ApAAKKxAiLpcQQgRBQQKQNHAEJEAZEycAQgRBQQKQNHAEJEAZEycAQgRBQQKQNHAEJEAZEycAQgRBQQKQNHqIIQqWuzZfx5i2OzSjReOCAaA0jpRxAPH68iJW2rjM%2FHl8OCAdGYOyAaA0jpAQEIEQVEysARqiCGurg5xdJJbji5NcWWQLapAhJ%2FqAKWrv8Fl7tFSQcWbxYAAAAASUVORK5CYII%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22pendrawspritefromurl%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20the%20image%20from%20url%3A%20%5Burl%5D%20at%20x%3A%5Bx%5D%20y%3A%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20EXAMPLE_IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22240%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22180%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22rotateStamp%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20stamp%20rotation%20to%20%5BANGLE%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2290%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getstamprotation%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20Rotation%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2290%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setpenstrechandsquash%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20stamp%20width%20to%20%5Bwidth%5D%20and%20height%20to%20%5Bheight%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2264%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2264%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getstampwidth%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20Width%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getstampheight%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20Height%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setstampcolor%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Tint%20stamp%20by%20%5Bcolor%5D%20and%20transparency%5BT%5D(0-255)%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%23ffffff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20T%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22offsetStamp%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20stamp%20anchorPoint%20to%20%5BAnchor%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20Anchor%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22AnchorPointMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%7D%3B%0A%0A%20%20const%20TriangleBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGIAAABiCAYAAACrpQYOAAAAAXNSR0IArs4c6QAABGtJREFUeF7tncGxEzEMhpMZrhwogAYog2a4UAJHSuBCM5TxGqAADlyZgXGIg%2BPd9UqyJP82yuXNvHi9sj7%2FsiUnm%2BsF%2F%2FX7buIV31S5heiDyxDyCNHtFZNAHlgNYWkYqCAeEF5%2F%2BXAD8PPj13K2odq9nCIChBip7oU3EFkNueuVVYEo8Y0aMohX795efrz%2FtORaAQuiVkPyfgUi%2FQvRflFsQBvIoRoyiPS3UMUyMAKEaP7qXwQJ4s23z5dfL983o02hKb9WUwUSiEdYooCoQhTSOERyQRrADUSCkF5nilhtrUAB8aQGKoiVYAQIUSDRvwgBxEYNHEWsoooAoT%2B5RT3CgNjLpDkjmr0ONRpEM5PmgEhtZ4YBAaJXDStUZ0eCUFXD7DACBDf%2BGbUfDiJn0r3jKzPxGdeKUSB2c4ceGHVJpIAxaoys4Ywy8qmuxLL4oHEDxBRnFiNAqKvhKBOfKUQFCA05KvThDcJEDa3a1CwHSAFCYTZrdDEEhNaWtXRA6yBpBlV4gjALS5SyOTqMAKERVxT68AJhqgaKItAPkNxBaFVaJZMQOa9wBTESAnp11gOESblboogdGB7jJ5nqYcjuR%2BxJ1hk1QgxR1iDg1IAaotxAUJM4yif8NISClldYghBtWb1AoG1nA8Q%2FeVn64lTEljcXHf54KgJJFVYgRGGJmiGfTi9mA4T1IkCAfBXMAoRYDaMUgRCiAsQ9jI0OT2YgqHlDHc69F%2Bvy%2FiNhaIPoCksjQ1MGMuoL9SYgpGoAA5HM0fbP4X5O80bdakAAMWrhNgGBcO7ATCWemo%2BozqqDmB3CqOqsFgjYcreSMrT8ZL5GwB3%2B9AAYoQoN0kuqIcHwfCyRGYjyASYas5PSh0Uy6JXk9YJoPm2M4jzNNhYgvLazAYIwEzxUoQLi6LFvhDGqNrFShIcqekCQHvum6umTzixBWMPoBkF9yJUHkP8RBPtpYyuAsFSFVBEB4u%2FMkvpvMy%2BlHbEf%2B7aKIqxUIQEhfuybNQzrNaK0X%2FsASQyiPPzxdEALpqcd2rkFF8SydSWJWjXPLQKEhMD9mlEgQg070LRgcBQRIJBAHGXSHQqf9tJc6tdYuKmKUPmExpHHPXc7Z9SltvTCCBAVGWQQpmpIfpAO%2Fmx2S97vsaVHFRRFBIjidytacF1A9HyM8mxm9szCs7657%2FfaIoVxpghzNawUmjJ0SR2KBMJSDYuDIJfKWyBc1LAiCEmpPEAobV%2FrtYi7VhyBcFPDqorgqiJAGClCFYT1Ip190Ltl5G5RPQ%2BXqCFqTxFRZdUkS%2FyBkQCh7PS97ihnFjWIUIMRmDMYAcLI8XW3IhCrfA%2FOycfk27RglIpg5Q4oO53Z7DiqQ21AULesszmAPG2FDan%2BONrOZhAsNSBlw1QHCP1Lvoxjxx6MAEF2dbuhKghqWApFbKFwQOyVP5Ii2GEpQPSDqGBcA8SA0JRvWa4VTyBSA2p44kpRabybbma2owaRBvcIT1YOi37bHthN6MJp7h64%2FgHORJl%2BnCcCdQAAAABJRU5ErkJggg%3D%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22pendrawtexturedtrifromurl%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Draw%20a%20triangle%20with%20points%20at(seperated%20by%20commas)%5Btrianglepoints%5D%20and%20the%20uvs%20of%20%5Btriangleuvs%5D%20with%20the%20image%20from%20url%3A%5Burl%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20EXAMPLE_IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20trianglepoints%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2C0%2C10%2C10%2C0%2C10%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20triangleuvs%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2C0%2C1%2C1%2C0%2C1%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22settripointcolour%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Tint%20point%20%5Bpointmenu%5D%20by%20%5Bcolor%5D%20and%20transparency%5BT%5D(0-255)%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20pointmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22pointmenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%23ffffff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20T%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setTriPointZ%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20point%20%5Bpointmenu%5D's%20depth%20to%20%5BZ%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20pointmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22pointmenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%7D%3B%0A%0A%20%20const%20LineBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAAAXNSR0IArs4c6QAAAclJREFUeF7t3EFuxCAMBdDmCL1Sz9XlnGuu1CO0IjNIFIUEiAF%2F%2B7OIhORI6MU2ysbbB9eVwG8WsIX9%2FuAqCuRoMXAjXDlrdrTP5%2BNfxM%2FX974n3DHcIVoIJVxjpsVwwjVmGuE6My0t09Di2ONekMWelmdavBcI14HGW7UTzTtcc3mm7dFrqd5C85pxt9E8womgeYMTQ%2FMEJ4rmBU4czQPcEDTrcMPQLMMNRbMKNxzNItwUNGtw09AswU1FswI3Hc0C3BI0dLhlaMhwS9FQ4ZajIcKpQEODU4OGBKcKDQVOHRoCnEo07XBq0TTDqUbTCqceTSMcBJo2OBg0TXBQaFrg4NA0wEGirYaDRVsJB422Cg4ebQWcCbTZcGbQZsKZQpsFZw5tBpxJtNFwZtFGwplGGwVnHm0EnAs0aTg3aJJwrtCk4NyhScC5RLsL5xbtDpxrtF4492g9cEQLao0jgoj2RmuBI1qCVgtHtAytBo5oB2hXcEQroJ3BEe0ErQRHtAu0IziiVaDlcESrREvhiNaAFuGI1ohWBReHaTb%2BnnUcBeuVMAatmHFEK3%2FMIhzRzisgDt7bs67jlwyrvgRPm04szPG8TjOs4v0Dp6EsWljkur0AAAAASUVORK5CYII%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22drawLine%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Draw%20a%20line%20from%3A%5Bx1%5D%5By1%5D%20to%3A%5Bx2%5D%5By2%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setLineWidth%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20LineStyleIcon%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20line%20the%3A%5Bpoint%5D%20point's%20width%20to%3A%5BWidth%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20Width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20point%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22All%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22linePointsmenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setLineColor%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20LineStyleIcon%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20line%20color%20to%3A%5Bcolor%5D%20and%20transparency%20to%3A%5BAlpha%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%23ffffff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20Alpha%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22255%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%7D%3B%0A%0A%20%20const%20DepracatedBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAAAXNSR0IArs4c6QAAAphJREFUeF7t20lywyAQBdB4lQvlFjlvbpELZZUUqqKMCFM3PXzA3liyLQTPH4Fk%2BfH2fPwmy2Hxka2fulp0iTj5mxHpdLyqS4C53nz%2F%2FLgl6ufr%2B3S8pksVLqgdjFdES02acIfiVdFIcIfhNdFyuLA%2BvMHGoy3JIB01SRtuNjchtz2fbpAL2ACQ1ebSPI1V0KKA7LbWJrjsAhcCnGpj68xgqmBwwOm29U6ppncACCjSph7cblMVETTKFRCxHTomULQNI4mLbRXdsTGgeN0pcKt2W3E0SldNA6JSEaUEqtWVmriVuq0aGjdxK%2BCpos3CoR7z1NEk4NDwTNCk4FDwzNAk4bzxTNGk4bzwzNE04KzxXNC04Kzw3NA04bTxXNG04bTw3NEs4KTxINCs4KTwYNAs4WbxoNCs4bh4cGgecFS860pMfgtavDwTnr3uqOJej0vrzlkeThEimlfiInQXr%2FWNeCUt1skrcVN43mjeiWPhIaChwA0NGJ4DQemQ4d1VSalDSRtK4kiDBAqed%2BJIaDGeCHiecCw0FDwvuC5aTNVrAvwcmobR4iaIeNaJo6Dd%2FmeGhmcJx0Ebnq5YDxhWcDNokHgWcBJocHjacJJoUHiacBpoMHhacJpoEHgacBZo7njScJZorniScB5obnhScJ5oLngScAho5nizcEhopngzcIhoZnhcOGQ0EzwO3Apo6nhUuJXQVPEocCuiqeGNwq2MpoI3ArcDmjheD24nNFG8FtyOaGJ4Nbid0UTwSnAnoE3j5XAnoU3hpXAnorHxoH8tL93Qp%2FgaKTgBjrSBYsURih626MJZ31oAoNfEix5NuAPRuse8LtzBaE28FC588Ipn4dE7JQPoWapVqLr8m44k1Tgd7Za83OUPGEk0ZW66HHQAAAAASUVORK5CYII%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22settargetsw%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Change%20the%20target%20screen%20size%20to%20width%5Bwidth%5D%20and%20height%5Bheight%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22480%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22360%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22gettargetstagewidth%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Target%20Stage%20Width%22%2C%0A%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22gettargetstageheight%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Target%20Stage%20Height%22%2C%0A%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22converttocanvascoords%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Convert%20%5Bscrcoord%5D%20to%20%5BcoordTypes%5D%20units%20on%20the%20axis%20%5Bcoordmenu%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22coordMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20scrcoord%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20coordTypes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22coordTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%7D%3B%0A%0A%20%20%2F%2FStamps%0A%0A%20%20class%20PenPlus%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22betterpen%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Pen%2B%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%230e9a6b%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%230b7f58%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23096647%22%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%0A%20%20%20%20%20%20%20%20%20%20%22https%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLdR2VVCBIN3CceUdgKWOUxFEEbLqWgCC9%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%0A%20%20%20%20%20%20%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIzNy44NjkyMSIgaGVpZ2h0PSI0OC44NTI3MiIgdmlld0JveD0iMCwwLDM3Ljg2OTIxLDQ4Ljg1MjcyIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgY3g9IjIzNy41NDM0IiBjeT0iMTg0LjAwNTYiIHI9IjkuOTg1NDkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY29sb3ItMSI%2BPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8%2BPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjY2ZkNWU5Ii8%2BPC9yYWRpYWxHcmFkaWVudD48L2RlZnM%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyMy4zMDE4MSwtMTYzLjc2MzA5KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMjUuMTYzNTYsMTkzLjIwMDIxYzAuNTYxNTMsLTEuMTA3NDYgMi4yMzQwNCwtMy4yODU4MyAyLjIzNDA0LC0zLjI4NTgzYzAsMCAwLjU5NDQyLDEuODIzOTEgMS4yMjQ0OSwyLjU5NTc1YzAuNjMyMTIsMC43NzQzNSAyLjA4ODc4LDEuNDc0ODQgMi4wODg3OCwxLjQ3NDg0YzAsMCAtMi4xOTQ0NiwxLjI4MTQxIC0zLjMyNDIxLDEuNzI2OTVjLTEuMTEwMzIsMC40Mzc4NyAtMy4zOTcsMC45MjM2NyAtMy4zOTcsMC45MjM2N2MwLDAgMC41OTk3NCwtMi4zMDI5OSAxLjE3MzksLTMuNDM1Mzh6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9IiM1NzVlNzUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjI3LjYxMTMxLDE4OS4yOTIwM2wxNC45NTE1NCwtMTUuMjcxOTNjMCwwIDIuMjA2LDAuODk1MDUgMi45NTc3NiwxLjYzMDQ3YzAuODY4OCwwLjg0OTkxIDEuOTU0ODksMy4xNzUzOCAxLjk1NDg5LDMuMTc1MzhsLTE2LjEyNjMxLDE1LjE2NTE0YzAsMCAtMi4wMDYzOSwtMS4xMjc4NiAtMi42MDkyMSwtMS44ODU2OGMtMC42NDA4MiwtMC44MDU2IC0xLjEyODY4LC0yLjgxMzM3IC0xLjEyODY4LC0yLjgxMzM3eiIgZmlsbD0idXJsKCNjb2xvci0xKSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPHBhdGggZD0iTTIzNy43NTY5OSwxNzIuOTUyMTNjMCwwIDAuOTg2MTksMS4wNTA2MiAyLjM5NjA4LC0wLjI3MDcyYzEuODAzLC0xLjY4OTc3IDQuMjMxMDUsLTUuOTAxNDcgNS40NDc0MywtNi41ODcwN2MxLjM3NDgsLTAuNzc0ODkgMy45MDQxNCwwLjIzNjM5IDMuOTA0MTQsMC4yMzYzOSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yMzYuMDc5ODEsMTcyLjMxMTM1YzAsLTAuNjkwMzYgMC41NTk2NCwtMS4yNSAxLjI1LC0xLjI1YzAuNjkwMzYsMCAxLjI1LDAuNTU5NjQgMS4yNSwxLjI1YzAsMC42OTAzNiAtMC41NTk2NCwxLjI1IC0xLjI1LDEuMjVjLTAuNjkwMzYsMCAtMS4yNSwtMC41NTk2NCAtMS4yNSwtMS4yNXoiIGZpbGw9IiM1NzVlNzUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwLjUiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPHBhdGggZD0iTTI1MC45OTk3OSwxNjQuNzI4NzdjMCwwIDEuOTEzOTYsLTEuMDUxOTMgNC4yMDAwOSwxLjMyMzU4YzIuNDI2ODUsMi41MjE3MyAwLjYwNTc2LDQuNDQzNDQgMC42MDU3Niw0LjQ0MzQ0bC04LjMzMDE0LDguMjIzMzVjMCwwIC0wLjc1MDQsLTIuMDcxMTIgLTEuNTYyNDksLTIuNzk0OTRjLTAuODI1MjQsLTAuNzM1NTUgLTMuMzUwMTYsLTEuNTgzNzMgLTMuMzUwMTYsLTEuNTgzNzN6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9IiM1NzVlNzUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMzkuODkzMzcsMjAxLjcxMTE4KSBzY2FsZSgwLjg3MjM3LDAuODcyMzcpIiBmb250LXNpemU9IjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmaWxsPSIjZThlYmY0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBmb250LWZhbWlseT0iU2FucyBTZXJpZiIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHRzcGFuIHg9IjAiIGR5PSIwIj4rPC90c3Bhbj48L3RleHQ%2BPC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6MTYuNjk4MTkxNTI3MDE2NDYyOjE2LjIzNjkxNDk5OTk5OTk4Mi0tPg%3D%3D%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20splitBlockCatagories(%5B%0A%20%20%20%20%20%20%20%20%20%20UtilityBlocks%2C%0A%20%20%20%20%20%20%20%20%20%20StampBlocks%2C%0A%20%20%20%20%20%20%20%20%20%20TriangleBlocks%2C%0A%20%20%20%20%20%20%20%20%20%20LineBlocks%2C%0A%20%20%20%20%20%20%20%20%20%20DepracatedBlocks%2C%0A%20%20%20%20%20%20%20%20%5D)%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22x%22%2C%20%22y%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20coordTypes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22Canvas%22%2C%20%22Scratch%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20pointmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%221%22%2C%20%222%22%2C%20%223%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TFmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22true%22%2C%20%22false%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20AnchorPointMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Top%20Left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Top%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-0.5%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Top%20Right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-1%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Middle%20Left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B0%2C%20-0.5%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Middle%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-0.5%2C%20-0.5%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Middle%20Right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-1%2C%20-0.5%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Bottom%20Left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B0%2C%20-1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Bottom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-0.5%2C%20-1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Bottom%20Right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-1%2C%20-1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20linePointsmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22All%22%2C%20%22Starting%22%2C%20%22Ending%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rgbtoSColor(%7B%20R%2C%20G%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20R%20%3D%20Math.min(Math.max(R%2C%200)%2C%20255)%3B%0A%20%20%20%20%20%20G%20%3D%20Math.min(Math.max(G%2C%200)%2C%20255)%3B%0A%20%20%20%20%20%20B%20%3D%20Math.min(Math.max(B%2C%200)%2C%20255)%3B%0A%20%20%20%20%20%20return%20(Math.floor(R)%20*%20256%20%2B%20Math.floor(G))%20*%20256%20%2B%20Math.floor(B)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hsvtoSColor(%7B%20H%2C%20S%2C%20V%20%7D)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Formula%20taken%20from%20https%3A%2F%2Fwww.rapidtables.com%2Fconvert%2Fcolor%2Fhsv-to-rgb.html%20and%20converted%20into%20javascipt%20by%20OAC%0A%20%20%20%20%20%20S%20%3D%20S%20%2F%20100%3B%0A%20%20%20%20%20%20V%20%3D%20V%20%2F%20100%3B%0A%20%20%20%20%20%20S%20%3D%20Math.min(Math.max(S%2C%200)%2C%201)%3B%0A%20%20%20%20%20%20V%20%3D%20Math.min(Math.max(V%2C%200)%2C%201)%3B%0A%20%20%20%20%20%20H%20%3D%20H%20%25%20360%3B%0A%20%20%20%20%20%20const%20C%20%3D%20V%20*%20S%3B%0A%20%20%20%20%20%20const%20X%20%3D%20C%20*%20(1%20-%20Math.abs(((H%20%2F%2060)%20%25%202)%20-%201))%3B%0A%20%20%20%20%20%20const%20M%20%3D%20V%20-%20C%3B%0A%20%20%20%20%20%20let%20Primes%20%3D%20%5B0%2C%200%2C%200%5D%3B%0A%20%20%20%20%20%20if%20(H%20%3E%3D%200%20%26%26%20H%20%3C%2060)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%2060%20%26%26%20H%20%3C%20120)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%20120%20%26%26%20H%20%3C%20180)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%20180%20%26%26%20H%20%3C%20240)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%20240%20%26%26%20H%20%3C%20300)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(H%20%3E%3D%20300%20%26%26%20H%20%3C%20360)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20Primes%5B0%5D%20%3D%20(Primes%5B0%5D%20%2B%20M)%20*%20255%3B%0A%20%20%20%20%20%20Primes%5B1%5D%20%3D%20(Primes%5B1%5D%20%2B%20M)%20*%20255%3B%0A%20%20%20%20%20%20Primes%5B2%5D%20%3D%20(Primes%5B2%5D%20%2B%20M)%20*%20255%3B%0A%20%20%20%20%20%20return%20this.rgbtoSColor(%7B%20R%3A%20Primes%5B0%5D%2C%20G%3A%20Primes%5B1%5D%2C%20B%3A%20Primes%5B2%5D%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getstampwidth(%7B%7D)%20%7B%0A%20%20%20%20%20%20return%20stampWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getstampheight(%7B%7D)%20%7B%0A%20%20%20%20%20%20return%20stampHeight%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20converttocanvascoords(%7B%20coordmenu%2C%20scrcoord%2C%20coordTypes%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(coordTypes%20%3D%3D%20%22Canvas%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(coordmenu%20%3D%3D%20%22x%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20scrcoord%20%2B%20runtime.stageWidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20scrcoord%20*%20-1%20%2B%20runtime.stageHeight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(coordmenu%20%3D%3D%20%22x%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20scrcoord%20-%20runtime.stageWidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20scrcoord%20*%20-1%20-%20runtime.stageHeight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20offsetStamp(%7B%20Anchor%20%7D)%20%7B%0A%20%20%20%20%20%20stampOffset%20%3D%20Anchor.split(%22%2C%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCoordSpace(%7B%20space%20%7D)%20%7B%0A%20%20%20%20%20%20coordinateSpace%20%3D%20space%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20SolidColorRet()%20%7B%0A%20%20%20%20%20%20return%20blankImage%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getstamprotation(%7B%7D)%20%7B%0A%20%20%20%20%20%20return%20stampRotation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotateStamp(%7B%20ANGLE%20%7D)%20%7B%0A%20%20%20%20%20%20stampRotation%20%3D%20ANGLE%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pendrawspritefromurl(%7B%20url%2C%20x%2C%20y%20%7D)%20%7B%0A%20%20%20%20%20%20var%20scaleMultiplier%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20if%20(!textures.hasOwnProperty(url))%20%7B%0A%20%20%20%20%20%20%20%20textures%5Burl%5D%20%3D%20loadImageAndCreateTextureInfo(url%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20drawImage(%0A%20%20%20%20%20%20%20%20textures%5Burl%5D.texture%2C%0A%20%20%20%20%20%20%20%20stampWidth%20*%20scaleMultiplier%2C%0A%20%20%20%20%20%20%20%20stampHeight%20*%20scaleMultiplier%2C%0A%20%20%20%20%20%20%20%20x%20*%20scaleMultiplier%2C%0A%20%20%20%20%20%20%20%20y%20*%20scaleMultiplier%2C%0A%20%20%20%20%20%20%20%20stampRotation%20-%2090%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setLineWidth(%7B%20Width%2C%20point%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(point%20%3D%3D%3D%20%22All%22)%20%7B%0A%20%20%20%20%20%20%20%20lineWidth%20%3D%20%5BWidth%2C%20Width%5D%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(point%20%3D%3D%3D%20%22Starting%22)%20%7B%0A%20%20%20%20%20%20%20%20lineWidth%5B0%5D%20%3D%20Width%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20lineWidth%5B1%5D%20%3D%20Width%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20drawLine(%7B%20x1%2C%20y1%2C%20x2%2C%20y2%20%7D)%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20let%20tempColors%20%3D%20triangleColors%3B%0A%20%20%20%20%20%20triangleColors%20%3D%20%5B%0A%20%20%20%20%20%20%20%20lineColor.r%2C%0A%20%20%20%20%20%20%20%20lineColor.g%2C%0A%20%20%20%20%20%20%20%20lineColor.b%2C%0A%20%20%20%20%20%20%20%20lineColor.a%2C%0A%20%20%20%20%20%20%20%20lineColor.r%2C%0A%20%20%20%20%20%20%20%20lineColor.g%2C%0A%20%20%20%20%20%20%20%20lineColor.b%2C%0A%20%20%20%20%20%20%20%20lineColor.a%2C%0A%20%20%20%20%20%20%20%20lineColor.r%2C%0A%20%20%20%20%20%20%20%20lineColor.g%2C%0A%20%20%20%20%20%20%20%20lineColor.b%2C%0A%20%20%20%20%20%20%20%20lineColor.a%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20let%20vectorLength%20%3D%20Math.sqrt(Math.pow(x2%20-%20x1%2C%202)%20%2B%20Math.pow(y2%20-%20y1%2C%202))%3B%0A%20%20%20%20%20%20let%20vectorDir%20%3D%20%7B%0A%20%20%20%20%20%20%20%20X%3A%20(x2%20-%20x1)%20%2F%20vectorLength%2C%0A%20%20%20%20%20%20%20%20Y%3A%20(y2%20-%20y1)%20%2F%20vectorLength%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20let%20triangleDir%20%3D%20%7B%0A%20%20%20%20%20%20%20%20X1%3A%20-vectorDir.Y%20*%20lineWidth%5B0%5D%2C%0A%20%20%20%20%20%20%20%20Y1%3A%20vectorDir.X%20*%20lineWidth%5B0%5D%2C%0A%20%20%20%20%20%20%20%20X2%3A%20-vectorDir.Y%20*%20lineWidth%5B1%5D%2C%0A%20%20%20%20%20%20%20%20Y2%3A%20vectorDir.X%20*%20lineWidth%5B1%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20if%20(!textures.hasOwnProperty(blankImage))%20%7B%0A%20%20%20%20%20%20%20%20textures%5BblankImage%5D%20%3D%20loadImageAndCreateTextureInfo(blankImage%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20drawTexturedTri(%0A%20%20%20%20%20%20%20%20textures%5BblankImage%5D.texture%2C%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20(x1%20%2B%20triangleDir.X1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(y1%20%2B%20triangleDir.Y1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(x1%20-%20triangleDir.X1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(y1%20-%20triangleDir.Y1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(x2%20%2B%20triangleDir.X2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(y2%20%2B%20triangleDir.Y2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%5B0.5%2C%200.5%2C%200.5%2C%200.6%2C%200.6%2C%200.6%5D%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20drawTexturedTri(%0A%20%20%20%20%20%20%20%20textures%5BblankImage%5D.texture%2C%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20(x1%20-%20triangleDir.X1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(y1%20-%20triangleDir.Y1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(x2%20-%20triangleDir.X2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(y2%20-%20triangleDir.Y2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(x2%20%2B%20triangleDir.X2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%20%20(y2%20%2B%20triangleDir.Y2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%5B0.5%2C%200.5%2C%200.5%2C%200.6%2C%200.6%2C%200.6%5D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20triangleColors%20%3D%20tempColors%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gettargetstagewidth(%7B%7D)%20%7B%0A%20%20%20%20%20%20return%20screenWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gettargetstageheight(%7B%7D)%20%7B%0A%20%20%20%20%20%20return%20screenHeight%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pendrawtexturedtrifromurl(%7B%20url%2C%20trianglepoints%2C%20triangleuvs%20%7D)%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20if%20(!textures.hasOwnProperty(url))%20%7B%0A%20%20%20%20%20%20%20%20textures%5Burl%5D%20%3D%20loadImageAndCreateTextureInfo(url%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20pointsarray%20%3D%20trianglepoints.split(%22%2C%22)%3B%0A%20%20%20%20%20%20var%20pointslen%20%3D%20pointsarray.length%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20pointslen%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20pointsarray%5Bi%5D%20%3D%20pointsarray%5Bi%5D%20*%20scalemultiplyer%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20uvarray%20%3D%20triangleuvs.split(%22%2C%22)%3B%0A%20%20%20%20%20%20drawTexturedTri(textures%5Burl%5D.texture%2C%20pointsarray%2C%20uvarray)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20precachetextures(%7B%20uri%2C%20clamp%20%7D)%20%7B%0A%20%20%20%20%20%20coolcash(uri%2C%20clamp%20%3D%3D%3D%20%22true%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setpenstrechandsquash(%7B%20width%2C%20height%20%7D)%20%7B%0A%20%20%20%20%20%20stampWidth%20%3D%20width%3B%0A%20%20%20%20%20%20stampHeight%20%3D%20height%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20settargetsw(%7B%20width%2C%20height%20%7D)%20%7B%0A%20%20%20%20%20%20screenWidth%20%3D%20width%3B%0A%20%20%20%20%20%20screenHeight%20%3D%20height%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getcostumedata(%7B%20costu%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20fileData%20%3D%20getspritecostume(util%2C%20costu)%3B%0A%20%20%20%20%20%20return%20fileData%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20coordBlock(%7B%20c1%2C%20c2%2C%20c3%2C%20c4%2C%20c5%2C%20c6%20%7D)%20%7B%0A%20%20%20%20%20%20return%20c1%20%2B%20%22%2C%22%20%2B%20c2%20%2B%20%22%2C%22%20%2B%20c3%20%2B%20%22%2C%22%20%2B%20c4%20%2B%20%22%2C%22%20%2B%20c5%20%2B%20%22%2C%22%20%2B%20c6%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20settripointcolour(%7B%20pointmenu%2C%20color%2C%20T%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(pointmenu%20%3D%3D%20%221%22)%20%7B%0A%20%20%20%20%20%20%20%20triangleColors%5B0%5D%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B1%5D%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B2%5D%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B3%5D%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(pointmenu%20%3D%3D%20%222%22)%20%7B%0A%20%20%20%20%20%20%20%20triangleColors%5B4%5D%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B5%5D%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B6%5D%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B7%5D%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20triangleColors%5B8%5D%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B9%5D%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B10%5D%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B11%5D%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setLineColor(%7B%20color%2C%20Alpha%20%7D)%20%7B%0A%20%20%20%20%20%20lineColor.r%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20lineColor.g%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20lineColor.b%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20lineColor.a%20%3D%20Alpha%20%2F%20255%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTriPointZ(%7B%20pointmenu%2C%20Z%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(pointmenu%20%3D%3D%20%221%22)%20%7B%0A%20%20%20%20%20%20%20%20TriangleZPositionArray%5B0%5D%20%3D%20Z%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(pointmenu%20%3D%3D%20%222%22)%20%7B%0A%20%20%20%20%20%20%20%20TriangleZPositionArray%5B1%5D%20%3D%20Z%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20TriangleZPositionArray%5B2%5D%20%3D%20Z%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setstampcolor(%7B%20color%2C%20T%20%7D)%20%7B%0A%20%20%20%20%20%20let%20convertr%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20let%20convertg%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20let%20convertb%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20let%20converta%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20quadColors%5B0%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B1%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B2%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B3%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B4%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B5%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B6%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B7%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B8%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B9%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B10%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B11%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B12%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B13%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B14%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B15%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B16%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B17%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B18%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B19%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B20%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B21%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B22%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B23%5D%20%3D%20converta%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20PenPlus())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [
            storage.AssetType.ImageVector,
            storage.AssetType.ImageBitmap,
            storage.AssetType.Sound,
            storage.AssetType.Font
          ].filter(i => i),
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (true) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
